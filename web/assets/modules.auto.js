var modules = {"objects":{"admin_controller":"<?php\n\n$game->registerMenu('Objets');\n\n$newObject = $game->createElementIfInRequest('newObject', [\n    'type' => 'Object',\n    'usable' => true,\n]);\n\n$game->deleteElementIfInRequest('removeObject');\n\nif ($request->get('currentObject')) {\n    $object = $game->getElement($request->get('currentObject')['id']);\n    foreach ($request->get('currentObject')['properties'] as $property) {\n        $object->set($property['name'], $property['value']);\n    }\n    if ($request->get('newEffect')) {\n        $effect = $object->createEffect($request->get('newEffect')['propertyName'], $request->get('newEffect')['quantity']);\n    }\n}\n\n$objects = $game->getElementsByProperties([\n    'type' => 'Object',\n]);\n\nreturn [\n    'objects' => $objects,\n    'properties' => $game->getElementsProperties(),\n];\n","admin_template":"<div class=\"row card\">\n    <div class=\"col s12\">\n      <ul class=\"tabs\">\n        <li class=\"tab col s3\"><a ng-click=\"currentTab = 'all'; currentObject = null\">All Objects<\/a><\/li>\n        <li class=\"tab col s3\"><a class=\"active\" ng-click=\"currentTab = 'new'\">New Object<\/a><\/li>\n      <\/ul>\n    <\/div>\n<\/div>\n\n<div ng-if=\"currentTab == 'new' || (!data.objects.length && !currentTab)\">\n    {% block %}\n        {% title %}New object{% endtitle %}\n        <input type=\"text\" placeholder=\"Name of the object\" ng-model=\"data.newObject.name\" \/>\n        <input type=\"text\" placeholder=\"Picture of the object\" ng-model=\"data.newObject.picture\" \/>\n        <button class=\"btn\" ng-click=\"post()\">Create this object<\/button>\n    {% endblock %}\n<\/div>\n\n<div ng-if=\"currentTab == 'all' || (!data.currentObject && data.objects.length && !currentTab)\">\n    {% block %}\n    <ul class=\"collection\">\n        <li class=\"collection-item clear row\" ng-repeat=\"object in data.objects\">\n            <span class=\"col-md-6\">{{ object.name }}<\/span>\n            <span class=\"col-md-6\">\n                <button class=\"btn\" ng-click=\"data.currentObject = object\">Edit<\/button>\n            <\/span>\n        <\/li>\n    <\/ul>\n    <div class=\"clear\"><\/div>\n    {% endblock %}\n<\/div>\n\n<div ng-if=\"data.currentObject && (currentTab == 'all' || !currentTab)\">\n    {% block %}\n        {% title %}Properties of {{ data.currentObject.name }}{% endtitle %}\n        <ul class=\"collection\">\n            <li class=\"row collection-item\" ng-repeat=\"property in data.currentObject.properties\" ng-if=\"property.name != 'isObject'\">\n                <span class=\"col-md-6\">{{ property.name }}<\/span>\n                <span class=\"col-md-6\"><input type=\"text\" ng-model=\"property.value\" \/><\/span>\n            <\/li>\n        <\/ul>\n        <button class=\"btn\" ng-click=\"post()\">Save<\/button>\n    {% endblock %}\n    {% block %}\n        <div ng-if=\"data.currentObject.effects.length\">\n            {% title %}Effects of {{ data.currentObject.name }}{% endtitle %}\n            <ul class=\"collection\">\n                <li class=\"row collection-item\" ng-repeat=\"effect in data.currentObject.effects\">\n                    <span class=\"col-md-6\">{{ effect.property_name }}<\/span>\n                    <span class=\"col-md-6\"><input type=\"text\" ng-model=\"effect.quantity\" \/><\/span>\n                <\/li>\n            <\/ul>\n            <button class=\"btn\" ng-click=\"post()\">Save<\/button>\n        <\/div>\n    {% endblock %}\n    {% block %}\n        {% title %}New effect{% endtitle %}\n        <select ng-model=\"data.newEffect.propertyName\">\n            <option disabled selected>( Select a property )<\/option>\n            <option ng-repeat=\"property in data.properties\" value=\"{{ property.name }}\">\n                {{ property.name }}\n            <\/option>\n        <\/select>\n        <input type=\"text\" ng-model=\"data.newEffect.quantity\" ng-model=\"Effect\" \/>\n        <button class=\"btn\" ng-click=\"post()\">Create effect<\/button>\n    {% endblock %}\n<\/div>\n","game_controller":"<?php\n\n$game->registerMenu('Objets');\n\nif ($player) {\n    $objects = $game->getElementsByProperties([\n        'type' => 'Object',\n    ]);\n\n    foreach ($objects as $object) {\n        if (!$player->getElement($object)) {\n            $player->createElement($object->id, 0);\n        }\n    }\n\n    if ($request->get('playerObjects')) {\n        foreach ($request->get('playerObjects') as $object) {\n            if (isset($object['data']) && $object['data']) {\n                $playerElement = $player->getElement($object['element']['id']);\n                $playerElement->set('quantity', $playerElement->get('quantity') + (int) $object['data']);\n            }\n        }\n    }\n\n    if ($request->get('currentObject')) {\n        $playerElement = $player->getElement($request->get('currentObject')['element']['id']);\n        $playerElement->set('quantity', $playerElement->get('quantity') - 1);\n    }\n\n    $playerObjects = $player->getElementsByProperties([\n        'type' => 'Object',\n    ]);\n\n    return [\n        'objects' => $objects,\n        'playerObjects' => $playerObjects,\n    ];\n}\n\nreturn [];\n","game_template":"<div class=\"card horizontal\" ng-repeat=\"object in data.playerObjects\">\n    <div class=\"card-image\">\n        <img ng-repeat=\"property in object.element.properties\" ng-if=\"property.name == 'picture'\" ng-src=\"{{ property.value }}\">\n    <\/div>\n    <div class=\"card-content\">\n        <div class=\"card-title\">\n            {{ object.element.name }}\n            <span ng-repeat=\"property in object.properties\" ng-if=\"property.name == 'quantity'\">\n                ({{ property.value }})\n            <\/span>\n        <\/div>\n        <div class=\"row\">\n            <div class=\"col-md-4\">\n                Effects: <br \/>\n                <div ng-repeat=\"effect in object.element.effects\">\n                    <span ng-if=\"effect.quantity > 0\">+<\/span> {{ effect.quantity }}\n                    {{ effect.property_name }}\n                <\/div>\n                <button class=\"btn\" ng-click=\"data.currentObject = object; post()\">Use it!<\/button>\n            <\/div>\n            <div class=\"col-md-4\">\n                <input type=\"text\"  ng-model=\"object.data\" placeholder=\"Quantity to buy\" \/>\n            <\/div>\n            <div class=\"col-md-4\">\n                <button class=\"btn\" ng-click=\"post()\">Buy!<\/button>\n            <\/div>\n        <\/div>\n    <\/div>\n<\/div>\n"},"resources":{"admin_controller":"<?php\n\n$arrayReturn = [];\n\n\/*\n* Add module resources to the game menu\n*\/\n\n$game->registerMenu('resources');\n\n\/*\n* Create a new Resource\n*\/\n\n$newResource = null;\n\n$newResource = $game->createElementIfInRequest('newResource', [\n    'type' => 'Resource',\n]);\n\n\/*\n* Edit an existant Resource\n*\/\n\n$game->updateElementsIfInRequest('resources');\n\n\/*\n* Delete a Resource\n*\/\n\n$game->deleteElementIfInRequest('removeResource');\n\n\/*\n* Retrieve all resources\n*\/\n\n$arrayReturn['resources'] = $game->getElementsByProperties([\n    'type' => 'Resource',\n]);\n\nreturn $arrayReturn;\n","admin_template":"<!-- Tabs -->\n<div ng-init=\"$parent.tabs = {}; $parent.currentModuleTab=false\"><\/div>\n\n<div class=\"row card\">\n    <div class=\"col s12\">\n      <ul class=\"tabs\">\n        <li class=\"tab col s3\" ng-repeat=\"(key, tabName) in tabs\">\n            <a ng-click=\"$parent.currentModuleTab = key\" ng-class=\"{active: $parent.currentModuleTab == key}\">\n                {{ tabName }}\n            <\/a>\n        <\/li>\n      <\/ul>\n    <\/div>\n<\/div>\n\n<div ng-init=\"tabs ? tabs.create = 'New Resource' : null\"><\/div>\n\n<!-- Create a Resource -->\n<div ng-show=\"!tabs || currentModuleTab == 'create'\">\n    {% block %}\n        {% title %}Create a new Resource {% endtitle %}\n        <form>\n            <input type=\"text\" ng-model=\"data.newResource.name\" placeholder=\"Resource name\" \/>\n            <input type=\"text\" ng-model=\"data.newResource.quantity\" placeholder=\"Resource default quantity\" \/>\n            <input type=\"text\" ng-model=\"data.newResource.picture\" placeholder=\"Picture (prefixed with http:\/\/)\" \/>\n            {% button %}Create this new Resource{% endbutton %}\n        <\/form>\n    {% endblock %}\n<\/div>\n\n<div ng-init=\"tabs ? tabs.edit = 'All resources' : null\"><\/div>\n\n<!-- Edit a Resource -->\n<div ng-show=\"(!tabs || currentModuleTab == 'edit') && data.resources && data.resources.length\">\n    {% block %}\n        {% title %}resources of your game{% endtitle %}\n        <ul class=\"collection\">\n            <li class=\"collection-item\">\n                <div class=\"btn pull-right\" ng-click=\"post()\"><i class=\"material-icons\">send<\/i><\/div>\n            <\/li>\n            <li ng-repeat=\"element in data.resources\" class=\"collection-item row\">\n\n                <div class=\"col-md-3\">\n                    <label>Name<\/label>\n                    <input type=\"text\" ng-model=\"element.name\" ng-change=\"post()\" \/>\n                <\/div>\n                <div class=\"col-md-3\" ng-repeat=\"(propertyName, propertyValue) in element.properties\" ng-if=\"propertyName == 'picture' || propertyName == 'quantity'\">\n                    <label>{{ propertyName }}<\/label>\n                    <input type=\"text\" ng-model=\"propertyValue\" \/>\n                <\/div>\n                <div class=\"col-md-3\">\n                    <span class=\"pull-right\" style=\"margin-right: 10px;margin-top: 25px;\"><\/span>\n                    <span class=\"pull-right\" style=\"margin-right: 10px;margin-top: 25px;\"><\/span>\n                    <span class=\"pull-right\" style=\"margin-right: 10px;margin-top: 25px;\"><!-- Delete the Resource -->\n<a class=\"btn-floating btn-tiny waves-effect waves-light red\" ng-click=\"data.removeResource = element.name;post();\"><i class=\"tiny material-icons\">delete<\/i><\/a>\n<\/span>\n                <\/div>\n                <div class=\"clearfix\"><!-- Edit the stats of the Resource -->\n<div ng-if=\"data.statsElementResource && elementTab == 'stats'+data.costsElementResource.id\">\n\n    <ul class=\"collection\">\n        <li class=\"collection-item row\">\n            <div class=\"col-md-3\">\n                <label>Create a new stat<\/label>\n            <\/div>\n            <div class=\"col-md-3\">\n                <input type=\"text\" ng-model=\"data.newStat.name\" placeholder=\"Name of the stat\" \/>\n            <\/div>\n            <div class=\"col-md-3\">\n                <input type=\"text\" ng-model=\"data.newStat.quantity\" placeholder=\"Default value for this stat\" \/>\n            <\/div>\n            <div class=\"col-md-3\">\n                <button ng-click=\"post()\" class=\"waves-effect waves-light btn\"><i class=\"material-icons\">send<\/i><\/button>\n            <\/div>\n        <\/li>\n        <li class=\"collection-item row\" ng-repeat=\"stat in data.resourcesStats\">\n            <div ng-repeat=\"property in data.statsElementResource.properties\" ng-if=\"property.name == stat.name\">\n                <div class=\"col-md-6\">\n                    <label>{{ property.name }}<\/label>\n                <\/div\/>\n                <div class=\"col-md-6\">\n                    <input type=\"text\" ng-model=\"property.value\" ng-change=\"post()\" \/>\n                <\/div>\n            <\/div>\n        <\/li>\n    <\/ul>\n<\/div>\n<\/div>\n                <div class=\"clearfix\"><!-- Edit the costs of the Resource -->\n<div ng-if=\"data.costsElementResource && elementTab == 'costs'+data.costsElementResource.id\">\n    Costs\n    <ul class=\"collection\">\n        <li ng-repeat=\"cost in data.costsElementResource.costs\" class=\"collection-item row\">\n            <div class=\"col-md-6\">\n                <label>{{ cost.cost.name }}<\/label\/>\n            <\/div>\n            <div class=\"col-md-6\">\n                <input type=\"text\" ng-change=\"post()\" ng-model=\"cost.quantity\" \/>\n            <\/div>\n        <\/li>\n    <\/ul>\n<\/div>\n<\/div>\n            <\/li>\n            <li class=\"collection-item\">\n                <div class=\"btn pull-right\" ng-click=\"post()\"><i class=\"material-icons\">send<\/i><\/div>\n            <\/li>\n        <\/ul>\n    {% endblock %}\n<\/div>\n","game_controller":"<?php\n\n$arrayReturn = [];\n\n\/*\n* Get the resources owned by the player\n*\/\n\n$resources = $game->getElementsByProperties([\n    'type' => 'Resource',\n]);\n\n$playerElements = [];\n\nif ($player) {\n    foreach ($resources as $element) {\n        $playerElement = $player->getElement($element->getId());\n        if (!$playerElement) {\n            $playerElement = $player->createElement($element->getId());\n        }\n        $playerElements[] = $playerElement;\n    }\n\n    $arrayReturn['playerElements'] = $playerElements;\n}\n\n$arrayReturn['resources'] = $resources;\n\nif (isset($error)) {\n    $arrayReturn['error'] = $error;\n}\n\nreturn $arrayReturn;\n","game_template":"<!-- List resources of the player -->\n<div ng-if=\"data.resources.length\">\n    <div class=\"chip\" ng-repeat=\"playerElement in data.playerElements\">\n        <img ng-repeat=\"property in playerElement.element.properties\" ng-if=\"property.name == 'picture'\" ng-src=\"{{ property.value }}\" alt=\"{{ element.name }}\">\n        <span ng-repeat=\"property in playerElement.properties\" ng-if=\"property.name == 'quantity'\">\n            {{ property.value }}\n        <\/span>\n    <\/div>\n<\/div>\n"},"units":{"admin_controller":"<?php\n\n","admin_template":"","game_controller":"<?php\n\n","game_template":""},"races":{"admin_controller":"<?php\n\nif ($request->get('introduction')) {\n    $module->set('introduction', $request->get('introduction'));\n} elseif (!$module->get('introduction')) {\n    $module->set('introduction', false);\n}\n\n$newRace = null;\n$arrayReturn = [];\n\n$newRace = $game->createElementIfInRequest('newRace', [\n    'type' => 'Race',\n]);\n\n\/\/ Delete Race if removeRace is sent\n$game->deleteElementIfInRequest('removeRace');\n\n\/\/ Update races properties if is sent\n$game->updateElementsIfInRequest('races');\n\n$races = $game->getElementsByProperties(['type' => 'Race']);\n\n$game->registerFilter('Race');\n\nreturn [\n    'races' => $races,\n    'introduction' => $module->get('introduction'),\n];\n","admin_template":"{% block %}\n    {% title %}Page d'introduction{% endtitle %}\n    <textarea placeholder=\"Texte d'ambiance: choisissez votre race, etc.\" ng-model=\"data.introduction\" ng-repeat=\"property in module.properties\" ng-if=\"property.name='introduction'\">\n    <\/textarea>\n    <button class=\"btn\" ng-click=\"post()\">Update<\/button>\n{% endblock %}\n\n{% block %}\n    {% title %}New race{% endtitle %}\n    <input type=\"text\" ng-model=\"data.newRace.name\" placeholder=\"Name of the race\" \/>\n    <input type=\"text\" ng-model=\"data.newRace.picture\" placeholder=\"Picture of the race\" \/>\n    <textarea placeholder=\"Description of this race\" ng-model=\"data.newRace.description\"><\/textarea>\n    <button class=\"btn\" ng-click=\"post()\">Create this race<\/button>\n{% endblock %}\n\n<div ng-if=\"data.races.length\">\n{% block %}\n    <button class=\"btn pull-right\" ng-click=\"post()\">Update<\/button>\n    {% title %}Races{% endtitle %}\n    <ul class=\"collection\">\n        <li ng-repeat=\"race in data.races\">\n            <div class=\"row\">\n                <div class=\"col-md-4\">\n                    <label>Name<\/label>\n                    <input type=\"text\" ng-model=\"race.name\" \/>\n                <\/div>\n                <div class=\"col-md-4\">\n                    <label>Picture<\/label>\n                    <input ng-repeat=\"property in race.properties\" ng-if=\"property.name=='picture'\" type=\"text\" ng-model=\"property.value\" \/>\n                <\/div>\n                <div class=\"col-md-4\">\n                    <label>Description<\/label>\n                    <textarea ng-repeat=\"property in race.properties\" ng-if=\"property.name=='description'\" ng-model=\"property.value\" ng-bind=\"property.value\"><\/textarea>\n                <\/div>\n            <\/div>\n        <\/li>\n    <\/ul>\n    <button class=\"btn pull-right\" ng-click=\"post()\">Update<\/button>\n    <div class=\"clear\"><\/div>\n{% endblock %}\n<\/div>\n","game_controller":"<?php\n\n$races = $game->getElementsByProperties(['type' => 'Race']);\n\nif ($request->get('chosenRace')) {\n    $player->set('Race', $request->get('chosenRace')['id']);\n}\n\n$playerRace = $player->get('Race');\nif ($playerRace) {\n    $playerRace = $game->getElement($playerRace);\n}\n\nreturn [\n    'races' => $races,\n    'playerRace' => $playerRace,\n    'introduction' => $module->get('introduction'),\n];\n","game_template":"<div ng-if=\"!data.playerRace\">\n    {% block %}\n        {% title %}\n            {{ data.introduction }}\n        {% endtitle %}\n    {% endblock %}\n    <div ng-repeat=\"race in data.races\" class=\"card horizontal\">\n        <div class=\"card-image\">\n            <img ng-repeat=\"property in race.properties\" ng-if=\"property.name == 'picture'\" ng-src=\"{{ property.value }}\" \/>\n        <\/div>\n        <div class=\"card-content\">\n            <div class=\"card-title\">\n                {{ race.name }}\n                <p>{{ race.description }}<\/p>\n                <button class=\"btn\" ng-click=\"data.chosenRace = race; post()\">I want to be a {{ race.name }}!<\/button>\n            <\/div>\n        <\/div>\n    <\/div>\n<\/div>\n<div ng-if=\"data.playerRace\">\n    You are a {{ data.playerRace.name }}\n<\/div>\n"},"character":{"admin_controller":"<?php\n\n$game->registerMenu('Personnage');\n$game->registerTrigger('xp', function () {\n    if ($player->get('xp') >= $player->get('level') * 1500) {\n        $player->set('xp', 0);\n        $player->set('level', $player->get('level') + 1);\n    }\n});\n\nreturn [];\n","admin_template":"{% block %}Hello Jcray! This is my module!{% endblock %}\n","game_controller":"<?php\n\n$game->registerMenu('Personnage');\n\nif (!$player->get('level')) {\n    $player->set('level', 1);\n}\n\nif (!$player->get('xp')) {\n    $player->set('xp', 0);\n}\n\n$player->set('xp', 6000);\n\nreturn [];\n","game_template":"{% block %}\n    {% title %}{{ player.pseudo }}{% endtitle %}\n    <ul class=\"collection\">\n        <li class=\"collection-item\">\n            Level:\n            <span ng-repeat=\"property in player.properties\" ng-if=\"property.name=='level'\">\n                {{ property.value }}\n            <\/span>\n        <\/li>\n\n        <li class=\"collection-item\">\n            Xp:\n            <span ng-repeat=\"property in player.properties\" ng-if=\"property.name=='xp'\">\n                {{ property.value }}\n            <\/span>\n        <\/li>\n        <li class=\"collection-item\" ng-repeat=\"playerElement in data.filters\">\n            {{ filter.property_name }}\n            <span ng-repeat=\"property in player.properties\" ng-if=\"property.name == filter.property_name\">\n                {{ property.value }}\n            <\/span>\n        <\/li>\n    <\/ul>\n{% endblock %}\n"}};