var modules = {"buildings":{"admin_controller":"<?php\n\n$arrayReturn = [];\n$defaultProperties = [];\n\n$defaultProperties['requirable'] = 1;\n\n\/*\n* Add module buildings to the game menu\n*\/\n\n$game->registerMenu('buildings');\n\n\/*\n* Create a new Building\n*\/\n\n$newBuilding = null;\n\n$newBuilding = $game->createElementIfInRequest('newBuilding', array_merge($defaultProperties, [\n    'type' => 'Building',\n]));\n\n\/*\n* Edit costs of an Building\n*\/\n\n\/\/ Update costs of a Building\nif ($request->get('costsElementBuilding')) {\n    $currentBuilding = (array) $request->get('costsElementBuilding');\n    $elementBuilding = $game->getElement($currentBuilding['id']);\n    $createdCosts = [];\n    foreach ($currentBuilding['costs'] as $costInfos) {\n        $costInfos = (array) $costInfos;\n        $costInfos['cost'] = (array) $costInfos['cost'];\n        $createdCosts[] = $elementBuilding->createCost($costInfos['cost']['id'], $costInfos['quantity']);\n    }\n    $arrayReturn['costsElementBuilding'] = $request->get('costsElementBuilding');\n}\n\n$elements = $game->getElementsByProperties(['type' => 'Building']);\n$moneys = $game->getElementsByProperties(['type' => 'Resource']);\n\n\/\/ Apply default costs to buildings\nforeach ($elements as $element) {\n    $costs = $element->getCosts();\n    foreach ($moneys as $money) {\n        if (!$element->getCost($money)) {\n            $element->createCost($money, 0);\n        }\n    }\n}\n\n\/*\n* Edit requirements of an Building\n*\/\n\n\/\/ List all requirable elements of the game\n$arrayReturn['requirableElements'] = $game->getElementsByProperties(['requirable' => 1]);\n$arrayReturn['haveRequirableElements'] = (bool) count($arrayReturn['requirableElements']);\n\n$createdRequirements = [];\n\n$buildings = $game->getElementsByProperties([\n    'type' => 'Building',\n]);\n$settedElements = [];\n\n\/\/ Set default requirement (0)\nforeach ($buildings as $element) {\n    foreach ($element->getRequirements() as $requirement) {\n        $settedElements[] = $requirement->getRequiredElement()->getId();\n    }\n\n    foreach ($arrayReturn['requirableElements'] as $requirableElement) {\n        if (!in_array($requirableElement->getId(), $settedElements)) {\n            $createdRequirements[] = $element->createRequirement($requirableElement->getId(), 0);\n        }\n    }\n}\n\n\/\/ Update requirements of a Building\nif ($request->get('requirementsElementBuilding')) {\n    $currentBuilding = (array) $request->get('requirementsElementBuilding');\n    $elementBuilding = $game->getElement($currentBuilding['id']);\n    foreach ($currentBuilding['requirements'] as $requirementInfo) {\n        $requirementInfo = (array) $requirementInfo;\n        if (!isset($requirementInfo['required_element'])) {\n            continue;\n        }\n        $requirementInfo['required_element'] = (array) $requirementInfo['required_element'];\n        $createdRequirements[] = $elementBuilding->createRequirement($requirementInfo['required_element']['id'], $requirementInfo['ratio']);\n    }\n    $arrayReturn['requirementsElementBuilding'] = $createdRequirements;\n}\n\n\/\/ Delete a requirement of an Building\nif ($request->get('removeBuildingRequirement')) {\n    $currentBuilding = (array) $request->get('removeBuildingRequirement');\n    $elementBuilding = $game->getElement($currentBuilding['id']);\n    $elementBuilding->removeRequirement($currentBuilding);\n}\n\n\/*\n* Edit an existant Building\n*\/\n\n$game->updateElementsIfInRequest('buildings');\n\n\/*\n* Delete a Building\n*\/\n\n$game->deleteElementIfInRequest('removeBuilding');\n\n\/*\n* Retrieve all buildings\n*\/\n\n$arrayReturn['buildings'] = $game->getElementsByProperties([\n    'type' => 'Building',\n]);\n\nreturn $arrayReturn;\n","admin_template":"<!-- Tabs -->\n<div ng-init=\"tabs = {}; currentModuleTab=false\"><\/div>\n\n<div class=\"row card\">\n    <div class=\"col s12\">\n      <ul class=\"tabs\">\n        <li class=\"tab col s3\" ng-repeat=\"(key, tabName) in tabs\">\n            <a ng-click=\"$parent.currentModuleTab = key\" ng-class=\"{active: currentModuleTab == key}\">\n                {{ tabName | trans }}\n            <\/a>\n        <\/li>\n      <\/ul>\n    <\/div>\n<\/div>\n\n<div ng-if=\"data.error\">\n    <div class=\"card red\">\n        <div class=\"card-content white-text\">\n            <i class=\"material-icons\">error_outline<\/i> <span style=\"position: relative;top: -7px;\">{{ data.error.message  }}<\/span>\n        <\/div>\n    <\/div>\n<\/div>\n\n<div ng-init=\"tabs ? tabs.create = 'New Building' : null\"><\/div>\n\n<!-- Create a Building -->\n<div ng-show=\"!tabs || currentModuleTab == 'create' || (!data.buildings.length && !currentModuleTab)\">\n    {% block %}\n        {% title %}{{ \"Create a new Building\" | trans }}{% endtitle %}\n        <form>\n            <input type=\"text\" ng-model=\"data.newBuilding.name\" placeholder=\"{{ 'Building name' | trans }}\" \/>\n            <input type=\"text\" ng-model=\"data.newBuilding.description\" placeholder=\"{{ 'Building description' | trans }}\" \/>\n\n            <input type=\"text\" ng-model=\"data.newBuilding.quantity\" placeholder=\"{{ 'Building default quantity' | trans }}\" \/>\n\n\n            <input type=\"text\" ng-model=\"data.newBuilding.picture\" placeholder=\"{{ 'Picture (prefixed with http:\/\/)' | trans }}\" \/>\n            {% button %}{{ \"Create this new Building\" | trans }}{% endbutton %}\n        <\/form>\n    {% endblock %}\n<\/div>\n\n<div ng-init=\"tabs ? tabs.edit = 'All buildings' : null\"><\/div>\n\n<!-- Edit a Building -->\n<div ng-show=\"(!tabs || currentModuleTab == 'edit' || (data.buildings.length && !currentModuleTab)) && data.buildings && data.buildings.length\">\n    {% block %}\n        {% title %}{{ \"buildings of your game\" | trans | ucfirst }}{% endtitle %}\n        <ul class=\"collection\">\n            <li ng-repeat=\"element in data.buildings\" class=\"collection-item row\">\n                <div class=\"col-md-3\">\n                    <label>{{ \"Name\" | trans }}<\/label>\n                    <input type=\"text\" ng-model=\"element.name\" ng-change=\"silentPost()\" \/>\n                <\/div>\n                <div class=\"col-md-3\" ng-repeat=\"(propertyName, propertyValue) in element.properties\" ng-if=\"propertyName == 'picture' || propertyName == 'quantity'\">\n                    <label>{{ propertyName | trans }}<\/label>\n                    <input type=\"text\" ng-model=\"element.properties[propertyName]\" ng-change=\"silentPost()\"\/>\n                <\/div>\n                <div class=\"col-md-3\">\n                    <span class=\"pull-right\" style=\"margin-right: 10px;margin-top: 25px;\"><\/span>\n                    <span class=\"pull-right\" style=\"margin-right: 10px;margin-top: 25px;\"><!-- Button for edit the costs of the Building -->\n<a class=\"btn-floating btn-tiny waves-effect waves-light green\" ng-click=\"elementTab = 'costs'+element.id; data.costsElementBuilding = element\"><i class=\"fa fa-money\"><\/i><\/a>\n<\/span>\n                    <span class=\"pull-right\" style=\"margin-right: 10px;margin-top: 25px;\"><\/span>\n                    <span class=\"pull-right\" style=\"margin-right: 10px;margin-top: 25px;\"><!-- Button for edit the requirements of the Building -->\n<a\n    class=\"btn-floating btn-tiny waves-effect waves-light green\"\n    ng-click=\"elementTab = 'requirements'+element.id; data.requirementsElementBuilding = element\"\n>\n        <i class=\"fa fa-check-circle-o\"><\/i>\n<\/a>\n<\/span>\n                    <span class=\"pull-right\" style=\"margin-right: 10px;margin-top: 25px;\"><!-- Delete the Building -->\n<a class=\"btn-floating btn-tiny waves-effect waves-light red\" ng-click=\"data.removeBuilding = element.name;post();\"><i class=\"tiny material-icons\">delete<\/i><\/a>\n<\/span>\n                <\/div>\n                <div class=\"clearfix\"><!-- Edit the effects of the Building -->\n<div ng-if=\"data.effectsElementBuilding && elementTab == 'effects'+data.effectsElementBuilding.id\">\n    <h4>{{ 'Effects' | trans }}<\/h4>\n    <ul class=\"collection\">\n        <li class=\"collection-item row\">\n            <div class=\"col-md-3\">\n                <label>{{ \"Create a new effect\" | trans }}<\/label>\n            <\/div>\n            <div class=\"col-md-3\">\n                <input type=\"text\" ng-model=\"data.newEffect.quantity\" ng-model=\"Effect\" placeholder=\"{{ 'Effect quantity' | trans }}\" \/>\n            <\/div>\n            <div class=\"col-md-3\">\n                <select ng-model=\"data.newEffect.propertyName\" style=\"display: block\">\n                    <option disabled selected>( {{ \"Select a property\" | trans }} )<\/option>\n                    <option ng-repeat=\"property in data.properties\" value=\"{{ property.name }}\" ng-if=\"property.name != 'picture' && property.name != 'type' && property.name != 'quantity'\">\n                        {{ property.name }}\n                    <\/option>\n                <\/select>\n                <input type=\"radio\" style=\"position:relative; left: 0px; opacity: 100\" model=\"data.newEffect.type\" value=\"global\" \/> {{ \"Apply evertyime\" | trans }}\n                <input type=\"radio\"  style=\"position:relative; left: 0px; opacity: 100\" model=\"data.newEffect.type\" value=\"oneTime\" \/> {{ \"Apply when used\" | trans }}\n            <\/div>\n            <div class=\"col-md-3\">\n                <button ng-click=\"post()\" class=\"waves-effect waves-light btn\"><i class=\"material-icons\">send<\/i><\/button>\n            <\/div>\n        <\/li>\n        <li>\n            <div ng-if=\"data.effectsElementBuilding.effects.length\">\n                <ul class=\"collection\">\n                    <li class=\"row collection-item\" ng-repeat=\"effect in data.effectsElementBuilding.effects\">\n                        <span class=\"col-md-4\">{{ effect.property_name }}<\/span>\n                        <span class=\"col-md-4\"><input type=\"text\" ng-model=\"effect.quantity\" \/><\/span>\n                        <span class=\"col-md-4\">\n                            <a class=\"btn-floating btn-tiny waves-effect waves-light red\" ng-click=\"data.removeEffectBuilding = effect;post();\"><i class=\"tiny material-icons\">delete<\/i><\/a>\n                        <\/span>\n                    <\/li>\n                <\/ul>\n                <button class=\"btn\" ng-click=\"post()\">Save<\/button>\n            <\/div>\n        <\/li>\n    <\/ul>\n<\/div>\n<\/div>\n                <div class=\"clearfix\"><!-- Edit the stats of the Building -->\n<div ng-if=\"data.statsElementBuilding && elementTab == 'stats'+data.statsElementBuilding.id\">\n\n    <ul class=\"collection\">\n        <li class=\"collection-item row\">\n            <div class=\"col-md-3\">\n                <label>{{ \"Create a new stat\" | trans }}<\/label>\n            <\/div>\n            <div class=\"col-md-3\">\n                <input type=\"text\" ng-model=\"data.newStat.name\" placeholder=\"{{ 'Name of the stat' | trans }}\" \/>\n            <\/div>\n            <div class=\"col-md-3\">\n                <input type=\"text\" ng-model=\"data.newStat.quantity\" placeholder=\"{{ 'Default value for this stat' | trans }}\" \/>\n            <\/div>\n            <div class=\"col-md-3\">\n                <button ng-click=\"post()\" class=\"waves-effect waves-light btn\"><i class=\"material-icons\">send<\/i><\/button>\n            <\/div>\n        <\/li>\n        <li class=\"collection-item row\" ng-repeat=\"stat in data.buildingsStats\">\n            <div ng-repeat=\"(propertyName, propertyValue) in data.statsElementBuilding.properties\" ng-if=\"propertyName == stat.name\">\n                <div class=\"col-md-6\">\n                    <label>{{ propertyName }}<\/label>\n                <\/div\/>\n                <div class=\"col-md-6\">\n                    <input type=\"text\" ng-model=\"data.statsElementBuilding.properties[propertyName]\" ng-change=\"silentPost()\" \/>\n                <\/div>\n            <\/div>\n        <\/li>\n    <\/ul>\n<\/div>\n<\/div>\n                <div class=\"clearfix\"><!-- Edit the costs of the Building -->\n<div ng-if=\"data.costsElementBuilding && elementTab == 'costs'+data.costsElementBuilding.id\">\n    {{ 'Costs' | trans }}\n    <ul class=\"collection\">\n        <li ng-repeat=\"cost in data.costsElementBuilding.costs\" class=\"collection-item row\">\n            <div class=\"col-md-6\">\n                <label>{{ cost.cost.name }}<\/label\/>\n            <\/div>\n            <div class=\"col-md-6\">\n                <input type=\"text\" ng-model=\"cost.quantity\" ng-change=\"silentPost()\" \/>\n            <\/div>\n        <\/li>\n    <\/ul>\n<\/div>\n<\/div>\n                <div class=\"clearfix\"><!-- Edit the requirements of the Building -->\n<div ng-if=\"data.requirementsElementBuilding && elementTab == 'requirements'+data.requirementsElementBuilding.id\">\n    <h4>{{ 'Requirements' | trans }}<\/h4>\n    <ul class=\"collection\">\n        <li class=\"collection-item row\" ng-repeat=\"item in data.requirableElements\" ng-if=\"item.id != data.requirementsElementBuilding.id\">\n            <div class=\"col-md-2\" ng-if=\"item.properties.picture\">\n                <img src=\"{{ item.properties.picture }}\" alt=\"{{ item.name }}\" width=\"64\" \/>\n            <\/div>\n            <div class=\"col-md-5\">\n                <label>{{ item.name }} <i>({{ item.properties.type | trans }})<\/i><\/label\/>\n            <\/div>\n            <div class=\"col-md-5\">\n                <input ng-repeat=\"requirement in data.requirementsElementBuilding.requirements\" ng-if=\"requirement.required_element.id == item.id\" alt=\"{{ 'ratio' | trans}}\" type=\"text\" ng-model=\"requirement.ratio\" ng-change=\"silentPost()\" \/>\n            <\/div>\n        <\/li>\n    <\/ul>\n<\/div>\n<\/div>\n            <\/li>\n        <\/ul>\n    {% endblock %}\n<\/div>\n","game_controller":"<?php\n\n$arrayReturn = [];\n\n\/*\n* Buy a Building\n*\/\n\nif ($request->get('playerbuildings')) {\n    foreach ($request->get('playerbuildings') as $playerElement) {\n        if (isset($playerElement['data']) && (int) $playerElement['data'] > 0) {\n            $playerElementEntity = $player->getElement($playerElement['element']['id']);\n            try {\n                $playerElementEntity->set('quantity', (int) $playerElementEntity->get('quantity') + (int) $playerElement['data']);\n            } catch (Exception $e) {\n                $error = $e->getMessage();\n            }\n        }\n    }\n}\n\n\/*\n* Get the buildings owned by the player\n*\/\n\n$buildings = $game->getElementsByProperties([\n    'type' => 'Building',\n]);\n\n$playerElements = [];\n\nif ($player) {\n    foreach ($buildings as $element) {\n        $playerElement = $player->getElement($element->getId());\n        if (!$playerElement) {\n            $playerElement = $player->createElement($element->getId());\n        }\n        if ($player->canHave($element->getId())) {\n            $playerElements[] = $playerElement;\n        }\n    }\n\n    $arrayReturn['playerbuildings'] = $playerElements;\n}\n\n$arrayReturn['buildings'] = $buildings;\n\n\/*\n*   List stats of buildings\n*\/\n\n$arrayReturn['buildingsStats'] = $game->get('buildingsStats');\n\nif (isset($error)) {\n    $arrayReturn['error'] = $error;\n}\n\nreturn $arrayReturn;\n","game_template":"<div ng-if=\"data.error\">\n    <div class=\"card red\">\n        <div class=\"card-content white-text\">\n            <i class=\"material-icons\">error_outline<\/i> <span style=\"position: relative;top: -7px;\">{{ data.error | simpleQuote}}<\/span>\n        <\/div>\n    <\/div>\n<\/div>\n\n<!-- List buildings of the player -->\n<div ng-if=\"data.playerbuildings.length\">\n    <ul class=\"collection\">\n        <li class=\"collection-item row\" ng-repeat=\"playerElement in data.playerbuildings\">\n            <div class=\"col-md-4\">\n                <img ng-src=\"{{ playerElement.element.properties.picture }}\" alt=\"{{ playerElement.element.name }}\">\n            <\/div>\n            <div class=\"col-md-4\">\n                <h5>{{ playerElement.element.name }} <small>x{{ playerElement.properties.quantity }}<\/small><\/h5>\n                <!-- Stats for the playerElement -->\n<ul class=\"collection row\">\n    <li ng-repeat=\"stat in data.buildingsStats\">\n        <span class=\"col-md-6\">{{ stat.name }}<\/span>\n        <span class=\"col-md-6\" ng-repeat=\"(propertyName, propertyValue) in playerElement.properties\" ng-if=\"propertyName == stat.name\">{{ propertyValue }}<\/span>\n    <li>\n<\/ul>\n\n                <!-- Costs for the playerElement -->\n<ul class=\"collection row\">\n    <li>\n        <span ng-repeat=\"cost in playerElement.element.costs\" class=\"pull-left\">\n            <img ng-src=\"{{ cost.cost.properties.picture }}\" width=\"30\" alt=\"{{ cost.cost.name | trans }}\" \/>\n            &nbsp; {{ cost.quantity }}\n        <\/span>\n    <li>\n<\/ul>\n\n            <\/div>\n            <div class=\"col-md-4\">\n                <div class=\"row\">\n                    <div class=\"col-md-6\">\n                        <input type=\"text\" placeholder=\"{{ 'How many to buy?' | trans }}\" ng-model=\"playerElement.data\" \/>\n                    <\/div>\n                    <div class=\"col-md-6\">\n                        <button class=\"btn\" ng-click=\"post()\">\n                            <i class=\"material-icons\">send<\/i>\n                        <\/button>\n                    <\/div>\n                <\/div>\n            <\/div>\n\n        <\/li>\n    <\/ul>\n<\/div>\n"},"objects":{"admin_controller":"<?php\n\n$arrayReturn = [];\n$defaultProperties = [];\n\n\/*\n* Add module objects to the game menu\n*\/\n\n$game->registerMenu('objects');\n\n\/*\n* Create a new Object\n*\/\n\n$newObject = null;\n\n$newObject = $game->createElementIfInRequest('newObject', array_merge($defaultProperties, [\n    'type' => 'Object',\n]));\n\n\/*\n* Edit costs of an Object\n*\/\n\n\/\/ Update costs of a Object\nif ($request->get('costsElementObject')) {\n    $currentObject = (array) $request->get('costsElementObject');\n    $elementObject = $game->getElement($currentObject['id']);\n    $createdCosts = [];\n    foreach ($currentObject['costs'] as $costInfos) {\n        $costInfos = (array) $costInfos;\n        $costInfos['cost'] = (array) $costInfos['cost'];\n        $createdCosts[] = $elementObject->createCost($costInfos['cost']['id'], $costInfos['quantity']);\n    }\n    $arrayReturn['costsElementObject'] = $request->get('costsElementObject');\n}\n\n$elements = $game->getElementsByProperties(['type' => 'Object']);\n$moneys = $game->getElementsByProperties(['type' => 'Resource']);\n\n\/\/ Apply default costs to objects\nforeach ($elements as $element) {\n    $costs = $element->getCosts();\n    foreach ($moneys as $money) {\n        if (!$element->getCost($money)) {\n            $element->createCost($money, 0);\n        }\n    }\n}\n\n\/*\n* Edit requirements of an Object\n*\/\n\n\/\/ List all requirable elements of the game\n$arrayReturn['requirableElements'] = $game->getElementsByProperties(['requirable' => 1]);\n$arrayReturn['haveRequirableElements'] = (bool) count($arrayReturn['requirableElements']);\n\n$createdRequirements = [];\n\n$objects = $game->getElementsByProperties([\n    'type' => 'Object',\n]);\n$settedElements = [];\n\n\/\/ Set default requirement (0)\nforeach ($objects as $element) {\n    foreach ($element->getRequirements() as $requirement) {\n        $settedElements[] = $requirement->getRequiredElement()->getId();\n    }\n\n    foreach ($arrayReturn['requirableElements'] as $requirableElement) {\n        if (!in_array($requirableElement->getId(), $settedElements)) {\n            $createdRequirements[] = $element->createRequirement($requirableElement->getId(), 0);\n        }\n    }\n}\n\n\/\/ Update requirements of a Object\nif ($request->get('requirementsElementObject')) {\n    $currentObject = (array) $request->get('requirementsElementObject');\n    $elementObject = $game->getElement($currentObject['id']);\n    foreach ($currentObject['requirements'] as $requirementInfo) {\n        $requirementInfo = (array) $requirementInfo;\n        if (!isset($requirementInfo['required_element'])) {\n            continue;\n        }\n        $requirementInfo['required_element'] = (array) $requirementInfo['required_element'];\n        $createdRequirements[] = $elementObject->createRequirement($requirementInfo['required_element']['id'], $requirementInfo['ratio']);\n    }\n    $arrayReturn['requirementsElementObject'] = $createdRequirements;\n}\n\n\/\/ Delete a requirement of an Object\nif ($request->get('removeObjectRequirement')) {\n    $currentObject = (array) $request->get('removeObjectRequirement');\n    $elementObject = $game->getElement($currentObject['id']);\n    $elementObject->removeRequirement($currentObject);\n}\n\n\/*\n* Edit effects of an Object\n*\/\n\nif ($request->get('effectsElementObject') && $request->get('newEffect')) {\n    $object = $game->getElement($request->get('effectsElementObject')['id']);\n    if ($request->get('newEffect')) {\n        $effect = $object->createEffect($request->get('newEffect')['propertyName'], $request->get('newEffect')['quantity']);\n        $effect->setType($request->get('newEffect')['type'] ?? 'global');\n        $arrayReturn['created_effects'] = [$effect];\n    }\n}\n\n\/*\n* Delete an effect\n*\/\nif ($request->get('removeEffectObject') && $request->get('effectsElementObject')) {\n    $object = $game->getElement($request->get('effectsElementObject')['id']);\n    $object->removeEffect($request->get('removeEffectObject')['id']);\n}\n\n$arrayReturn['objects'] = $game->getElementsByProperties([\n    'type' => 'Object',\n]);\n\n$arrayReturn['properties'] = $game->getElementsProperties();\n\n\/*\n* Edit an existant Object\n*\/\n\n$game->updateElementsIfInRequest('objects');\n\n\/*\n* Delete a Object\n*\/\n\n$game->deleteElementIfInRequest('removeObject');\n\n\/*\n* Retrieve all objects\n*\/\n\n$arrayReturn['objects'] = $game->getElementsByProperties([\n    'type' => 'Object',\n]);\n\nreturn $arrayReturn;\n","admin_template":"<!-- Tabs -->\n<div ng-init=\"tabs = {}; currentModuleTab=false\"><\/div>\n\n<div class=\"row card\">\n    <div class=\"col s12\">\n      <ul class=\"tabs\">\n        <li class=\"tab col s3\" ng-repeat=\"(key, tabName) in tabs\">\n            <a ng-click=\"$parent.currentModuleTab = key\" ng-class=\"{active: currentModuleTab == key}\">\n                {{ tabName | trans }}\n            <\/a>\n        <\/li>\n      <\/ul>\n    <\/div>\n<\/div>\n\n<div ng-if=\"data.error\">\n    <div class=\"card red\">\n        <div class=\"card-content white-text\">\n            <i class=\"material-icons\">error_outline<\/i> <span style=\"position: relative;top: -7px;\">{{ data.error.message  }}<\/span>\n        <\/div>\n    <\/div>\n<\/div>\n\n<div ng-init=\"tabs ? tabs.create = 'New Object' : null\"><\/div>\n\n<!-- Create a Object -->\n<div ng-show=\"!tabs || currentModuleTab == 'create' || (!data.objects.length && !currentModuleTab)\">\n    {% block %}\n        {% title %}{{ \"Create a new Object\" | trans }}{% endtitle %}\n        <form>\n            <input type=\"text\" ng-model=\"data.newObject.name\" placeholder=\"{{ 'Object name' | trans }}\" \/>\n            <input type=\"text\" ng-model=\"data.newObject.description\" placeholder=\"{{ 'Object description' | trans }}\" \/>\n\n            <input type=\"text\" ng-model=\"data.newObject.quantity\" placeholder=\"{{ 'Object default quantity' | trans }}\" \/>\n\n\n            <input type=\"text\" ng-model=\"data.newObject.picture\" placeholder=\"{{ 'Picture (prefixed with http:\/\/)' | trans }}\" \/>\n            {% button %}{{ \"Create this new Object\" | trans }}{% endbutton %}\n        <\/form>\n    {% endblock %}\n<\/div>\n\n<div ng-init=\"tabs ? tabs.edit = 'All objects' : null\"><\/div>\n\n<!-- Edit a Object -->\n<div ng-show=\"(!tabs || currentModuleTab == 'edit' || (data.objects.length && !currentModuleTab)) && data.objects && data.objects.length\">\n    {% block %}\n        {% title %}{{ \"objects of your game\" | trans | ucfirst }}{% endtitle %}\n        <ul class=\"collection\">\n            <li ng-repeat=\"element in data.objects\" class=\"collection-item row\">\n                <div class=\"col-md-3\">\n                    <label>{{ \"Name\" | trans }}<\/label>\n                    <input type=\"text\" ng-model=\"element.name\" ng-change=\"silentPost()\" \/>\n                <\/div>\n                <div class=\"col-md-3\" ng-repeat=\"(propertyName, propertyValue) in element.properties\" ng-if=\"propertyName == 'picture' || propertyName == 'quantity'\">\n                    <label>{{ propertyName | trans }}<\/label>\n                    <input type=\"text\" ng-model=\"element.properties[propertyName]\" ng-change=\"silentPost()\"\/>\n                <\/div>\n                <div class=\"col-md-3\">\n                    <span class=\"pull-right\" style=\"margin-right: 10px;margin-top: 25px;\"><\/span>\n                    <span class=\"pull-right\" style=\"margin-right: 10px;margin-top: 25px;\"><!-- Button for edit the costs of the Object -->\n<a class=\"btn-floating btn-tiny waves-effect waves-light green\" ng-click=\"elementTab = 'costs'+element.id; data.costsElementObject = element\"><i class=\"fa fa-money\"><\/i><\/a>\n<\/span>\n                    <span class=\"pull-right\" style=\"margin-right: 10px;margin-top: 25px;\"><!-- Button for edit the effects of the Object -->\n<a class=\"btn-floating btn-tiny waves-effect waves-light green\" ng-click=\"elementTab = 'effects'+element.id; data.effectsElementObject  = element\"><i class=\"fa fa-asterisk\"><\/i><\/a>\n<\/span>\n                    <span class=\"pull-right\" style=\"margin-right: 10px;margin-top: 25px;\"><!-- Button for edit the requirements of the Object -->\n<a\n    class=\"btn-floating btn-tiny waves-effect waves-light green\"\n    ng-click=\"elementTab = 'requirements'+element.id; data.requirementsElementObject = element\"\n>\n        <i class=\"fa fa-check-circle-o\"><\/i>\n<\/a>\n<\/span>\n                    <span class=\"pull-right\" style=\"margin-right: 10px;margin-top: 25px;\"><!-- Delete the Object -->\n<a class=\"btn-floating btn-tiny waves-effect waves-light red\" ng-click=\"data.removeObject = element.name;post();\"><i class=\"tiny material-icons\">delete<\/i><\/a>\n<\/span>\n                <\/div>\n                <div class=\"clearfix\"><!-- Edit the effects of the Object -->\n<div ng-if=\"data.effectsElementObject && elementTab == 'effects'+data.effectsElementObject.id\">\n    <h4>{{ 'Effects' | trans }}<\/h4>\n    <ul class=\"collection\">\n        <li class=\"collection-item row\">\n            <div class=\"col-md-3\">\n                <label>{{ \"Create a new effect\" | trans }}<\/label>\n            <\/div>\n            <div class=\"col-md-3\">\n                <input type=\"text\" ng-model=\"data.newEffect.quantity\" ng-model=\"Effect\" placeholder=\"{{ 'Effect quantity' | trans }}\" \/>\n            <\/div>\n            <div class=\"col-md-3\">\n                <select ng-model=\"data.newEffect.propertyName\" style=\"display: block\">\n                    <option disabled selected>( {{ \"Select a property\" | trans }} )<\/option>\n                    <option ng-repeat=\"property in data.properties\" value=\"{{ property.name }}\" ng-if=\"property.name != 'picture' && property.name != 'type' && property.name != 'quantity'\">\n                        {{ property.name }}\n                    <\/option>\n                <\/select>\n                <input type=\"radio\" style=\"position:relative; left: 0px; opacity: 100\" model=\"data.newEffect.type\" value=\"global\" \/> {{ \"Apply evertyime\" | trans }}\n                <input type=\"radio\"  style=\"position:relative; left: 0px; opacity: 100\" model=\"data.newEffect.type\" value=\"oneTime\" \/> {{ \"Apply when used\" | trans }}\n            <\/div>\n            <div class=\"col-md-3\">\n                <button ng-click=\"post()\" class=\"waves-effect waves-light btn\"><i class=\"material-icons\">send<\/i><\/button>\n            <\/div>\n        <\/li>\n        <li>\n            <div ng-if=\"data.effectsElementObject.effects.length\">\n                <ul class=\"collection\">\n                    <li class=\"row collection-item\" ng-repeat=\"effect in data.effectsElementObject.effects\">\n                        <span class=\"col-md-4\">{{ effect.property_name }}<\/span>\n                        <span class=\"col-md-4\"><input type=\"text\" ng-model=\"effect.quantity\" \/><\/span>\n                        <span class=\"col-md-4\">\n                            <a class=\"btn-floating btn-tiny waves-effect waves-light red\" ng-click=\"data.removeEffectObject = effect;post();\"><i class=\"tiny material-icons\">delete<\/i><\/a>\n                        <\/span>\n                    <\/li>\n                <\/ul>\n                <button class=\"btn\" ng-click=\"post()\">Save<\/button>\n            <\/div>\n        <\/li>\n    <\/ul>\n<\/div>\n<\/div>\n                <div class=\"clearfix\"><!-- Edit the stats of the Object -->\n<div ng-if=\"data.statsElementObject && elementTab == 'stats'+data.statsElementObject.id\">\n\n    <ul class=\"collection\">\n        <li class=\"collection-item row\">\n            <div class=\"col-md-3\">\n                <label>{{ \"Create a new stat\" | trans }}<\/label>\n            <\/div>\n            <div class=\"col-md-3\">\n                <input type=\"text\" ng-model=\"data.newStat.name\" placeholder=\"{{ 'Name of the stat' | trans }}\" \/>\n            <\/div>\n            <div class=\"col-md-3\">\n                <input type=\"text\" ng-model=\"data.newStat.quantity\" placeholder=\"{{ 'Default value for this stat' | trans }}\" \/>\n            <\/div>\n            <div class=\"col-md-3\">\n                <button ng-click=\"post()\" class=\"waves-effect waves-light btn\"><i class=\"material-icons\">send<\/i><\/button>\n            <\/div>\n        <\/li>\n        <li class=\"collection-item row\" ng-repeat=\"stat in data.objectsStats\">\n            <div ng-repeat=\"(propertyName, propertyValue) in data.statsElementObject.properties\" ng-if=\"propertyName == stat.name\">\n                <div class=\"col-md-6\">\n                    <label>{{ propertyName }}<\/label>\n                <\/div\/>\n                <div class=\"col-md-6\">\n                    <input type=\"text\" ng-model=\"data.statsElementObject.properties[propertyName]\" ng-change=\"silentPost()\" \/>\n                <\/div>\n            <\/div>\n        <\/li>\n    <\/ul>\n<\/div>\n<\/div>\n                <div class=\"clearfix\"><!-- Edit the costs of the Object -->\n<div ng-if=\"data.costsElementObject && elementTab == 'costs'+data.costsElementObject.id\">\n    {{ 'Costs' | trans }}\n    <ul class=\"collection\">\n        <li ng-repeat=\"cost in data.costsElementObject.costs\" class=\"collection-item row\">\n            <div class=\"col-md-6\">\n                <label>{{ cost.cost.name }}<\/label\/>\n            <\/div>\n            <div class=\"col-md-6\">\n                <input type=\"text\" ng-model=\"cost.quantity\" ng-change=\"silentPost()\" \/>\n            <\/div>\n        <\/li>\n    <\/ul>\n<\/div>\n<\/div>\n                <div class=\"clearfix\"><!-- Edit the requirements of the Object -->\n<div ng-if=\"data.requirementsElementObject && elementTab == 'requirements'+data.requirementsElementObject.id\">\n    <h4>{{ 'Requirements' | trans }}<\/h4>\n    <ul class=\"collection\">\n        <li class=\"collection-item row\" ng-repeat=\"item in data.requirableElements\" ng-if=\"item.id != data.requirementsElementObject.id\">\n            <div class=\"col-md-2\" ng-if=\"item.properties.picture\">\n                <img src=\"{{ item.properties.picture }}\" alt=\"{{ item.name }}\" width=\"64\" \/>\n            <\/div>\n            <div class=\"col-md-5\">\n                <label>{{ item.name }} <i>({{ item.properties.type | trans }})<\/i><\/label\/>\n            <\/div>\n            <div class=\"col-md-5\">\n                <input ng-repeat=\"requirement in data.requirementsElementObject.requirements\" ng-if=\"requirement.required_element.id == item.id\" alt=\"{{ 'ratio' | trans}}\" type=\"text\" ng-model=\"requirement.ratio\" ng-change=\"silentPost()\" \/>\n            <\/div>\n        <\/li>\n    <\/ul>\n<\/div>\n<\/div>\n            <\/li>\n        <\/ul>\n    {% endblock %}\n<\/div>\n","game_controller":"<?php\n\n$arrayReturn = [];\n\n\/*\n* Buy a Object\n*\/\n\nif ($request->get('playerobjects')) {\n    foreach ($request->get('playerobjects') as $playerElement) {\n        if (isset($playerElement['data']) && (int) $playerElement['data'] > 0) {\n            $playerElementEntity = $player->getElement($playerElement['element']['id']);\n            try {\n                $playerElementEntity->set('quantity', (int) $playerElementEntity->get('quantity') + (int) $playerElement['data']);\n            } catch (Exception $e) {\n                $error = $e->getMessage();\n            }\n        }\n    }\n}\n\n\/*\n* Get the objects owned by the player\n*\/\n\n$objects = $game->getElementsByProperties([\n    'type' => 'Object',\n]);\n\n$playerElements = [];\n\nif ($player) {\n    foreach ($objects as $element) {\n        $playerElement = $player->getElement($element->getId());\n        if (!$playerElement) {\n            $playerElement = $player->createElement($element->getId());\n        }\n        if ($player->canHave($element->getId())) {\n            $playerElements[] = $playerElement;\n        }\n    }\n\n    $arrayReturn['playerobjects'] = $playerElements;\n}\n\n$arrayReturn['objects'] = $objects;\n\n\/*\n*   List stats of objects\n*\/\n\n$arrayReturn['objectsStats'] = $game->get('objectsStats');\n\nif (isset($error)) {\n    $arrayReturn['error'] = $error;\n}\n\nreturn $arrayReturn;\n","game_template":"<div ng-if=\"data.error\">\n    <div class=\"card red\">\n        <div class=\"card-content white-text\">\n            <i class=\"material-icons\">error_outline<\/i> <span style=\"position: relative;top: -7px;\">{{ data.error | simpleQuote}}<\/span>\n        <\/div>\n    <\/div>\n<\/div>\n\n<!-- List objects of the player -->\n<div ng-if=\"data.playerobjects.length\">\n    <ul class=\"collection\">\n        <li class=\"collection-item row\" ng-repeat=\"playerElement in data.playerobjects\">\n            <div class=\"col-md-4\">\n                <img ng-src=\"{{ playerElement.element.properties.picture }}\" alt=\"{{ playerElement.element.name }}\">\n            <\/div>\n            <div class=\"col-md-4\">\n                <h5>{{ playerElement.element.name }} <small>x{{ playerElement.properties.quantity }}<\/small><\/h5>\n                <!-- Stats for the playerElement -->\n<ul class=\"collection row\">\n    <li ng-repeat=\"stat in data.objectsStats\">\n        <span class=\"col-md-6\">{{ stat.name }}<\/span>\n        <span class=\"col-md-6\" ng-repeat=\"(propertyName, propertyValue) in playerElement.properties\" ng-if=\"propertyName == stat.name\">{{ propertyValue }}<\/span>\n    <li>\n<\/ul>\n\n                <!-- Costs for the playerElement -->\n<ul class=\"collection row\">\n    <li>\n        <span ng-repeat=\"cost in playerElement.element.costs\" class=\"pull-left\">\n            <img ng-src=\"{{ cost.cost.properties.picture }}\" width=\"30\" alt=\"{{ cost.cost.name | trans }}\" \/>\n            &nbsp; {{ cost.quantity }}\n        <\/span>\n    <li>\n<\/ul>\n\n            <\/div>\n            <div class=\"col-md-4\">\n                <div class=\"row\">\n                    <div class=\"col-md-6\">\n                        <input type=\"text\" placeholder=\"{{ 'How many to buy?' | trans }}\" ng-model=\"playerElement.data\" \/>\n                    <\/div>\n                    <div class=\"col-md-6\">\n                        <button class=\"btn\" ng-click=\"post()\">\n                            <i class=\"material-icons\">send<\/i>\n                        <\/button>\n                    <\/div>\n                <\/div>\n            <\/div>\n\n        <\/li>\n    <\/ul>\n<\/div>\n"},"resources":{"admin_controller":"<?php\n\n$arrayReturn = [];\n$defaultProperties = [];\n\n\/*\n* Create a new Resource\n*\/\n\n$newResource = null;\n\n$newResource = $game->createElementIfInRequest('newResource', array_merge($defaultProperties, [\n    'type' => 'Resource',\n]));\n\n\/*\n* Edit an existant Resource\n*\/\n\n$game->updateElementsIfInRequest('resources');\n\n\/*\n* Delete a Resource\n*\/\n\n$game->deleteElementIfInRequest('removeResource');\n\n\/*\n* Retrieve all resources\n*\/\n\n$arrayReturn['resources'] = $game->getElementsByProperties([\n    'type' => 'Resource',\n]);\n\nreturn $arrayReturn;\n","admin_template":"<!-- Tabs -->\n<div ng-init=\"tabs = {}; currentModuleTab=false\"><\/div>\n\n<div class=\"row card\">\n    <div class=\"col s12\">\n      <ul class=\"tabs\">\n        <li class=\"tab col s3\" ng-repeat=\"(key, tabName) in tabs\">\n            <a ng-click=\"$parent.currentModuleTab = key\" ng-class=\"{active: currentModuleTab == key}\">\n                {{ tabName | trans }}\n            <\/a>\n        <\/li>\n      <\/ul>\n    <\/div>\n<\/div>\n\n<div ng-init=\"tabs ? tabs.create = 'New Resource' : null\"><\/div>\n\n<!-- Create a Resource -->\n<div ng-show=\"!tabs || currentModuleTab == 'create' || (!data.resources.length && !currentModuleTab)\">\n    {% block %}\n        {% title %}{{ \"Create a new Resource\" | trans }}{% endtitle %}\n        <form>\n            <input type=\"text\" ng-model=\"data.newResource.name\" placeholder=\"{{ 'Resource name' | trans }}\" \/>\n            \n            <input type=\"text\" ng-model=\"data.newResource.quantity\" placeholder=\"{{ 'Resource default quantity' | trans }}\" \/>\n\n\n            <input type=\"text\" ng-model=\"data.newResource.picture\" placeholder=\"{{ 'Picture (prefixed with http:\/\/)' | trans }}\" \/>\n            {% button %}{{ \"Create this new Resource\" | trans }}{% endbutton %}\n        <\/form>\n    {% endblock %}\n<\/div>\n\n<div ng-init=\"tabs ? tabs.edit = 'All resources' : null\"><\/div>\n\n<!-- Edit a Resource -->\n<div ng-show=\"(!tabs || currentModuleTab == 'edit' || (data.resources.length && !currentModuleTab)) && data.resources && data.resources.length\">\n    {% block %}\n        {% title %}{{ \"resources of your game\" | trans | ucfirst }}{% endtitle %}\n        <ul class=\"collection\">\n            <li ng-repeat=\"element in data.resources\" class=\"collection-item row\">\n                <div class=\"col-md-3\">\n                    <label>{{ \"Name\" | trans }}<\/label>\n                    <input type=\"text\" ng-model=\"element.name\" ng-change=\"silentPost()\" \/>\n                <\/div>\n                <div class=\"col-md-3\" ng-repeat=\"(propertyName, propertyValue) in element.properties\" ng-if=\"propertyName == 'picture' || propertyName == 'quantity'\">\n                    <label>{{ propertyName | trans }}<\/label>\n                    <input type=\"text\" ng-model=\"element.properties[propertyName]\" ng-change=\"silentPost()\"\/>\n                <\/div>\n                <div class=\"col-md-3\">\n                    <span class=\"pull-right\" style=\"margin-right: 10px;margin-top: 25px;\"><\/span>\n                    <span class=\"pull-right\" style=\"margin-right: 10px;margin-top: 25px;\"><\/span>\n                    <span class=\"pull-right\" style=\"margin-right: 10px;margin-top: 25px;\"><\/span>\n                    <span class=\"pull-right\" style=\"margin-right: 10px;margin-top: 25px;\"><!-- Button for edit the requirements of the Resource -->\n<a\n    class=\"btn-floating btn-tiny waves-effect waves-light green\"\n    ng-click=\"elementTab = 'requirements'+element.id; data.requirementsElementResource = element\"\n>\n        <i class=\"fa fa-check-circle-o\"><\/i>\n<\/a>\n<\/span>\n                    <span class=\"pull-right\" style=\"margin-right: 10px;margin-top: 25px;\"><!-- Delete the Resource -->\n<a class=\"btn-floating btn-tiny waves-effect waves-light red\" ng-click=\"data.removeResource = element.name;post();\"><i class=\"tiny material-icons\">delete<\/i><\/a>\n<\/span>\n                <\/div>\n                <div class=\"clearfix\"><!-- Edit the effects of the Resource -->\n<div ng-if=\"data.effectsElementResource && elementTab == 'effects'+data.effectsElementResource.id\">\n    <h4>{{ 'Effects' | trans }}<\/h4>\n    <ul class=\"collection\">\n        <li class=\"collection-item row\">\n            <div class=\"col-md-3\">\n                <label>{{ \"Create a new effect\" | trans }}<\/label>\n            <\/div>\n            <div class=\"col-md-3\">\n                <input type=\"text\" ng-model=\"data.newEffect.quantity\" ng-model=\"Effect\" placeholder=\"{{ 'Effect quantity' | trans }}\" \/>\n            <\/div>\n            <div class=\"col-md-3\">\n                <select ng-model=\"data.newEffect.propertyName\" style=\"display: block\">\n                    <option disabled selected>( {{ \"Select a property\" | trans }} )<\/option>\n                    <option ng-repeat=\"property in data.properties\" value=\"{{ property.name }}\" ng-if=\"property.name != 'picture' && property.name != 'type' && property.name != 'quantity'\">\n                        {{ property.name }}\n                    <\/option>\n                <\/select>\n                <input type=\"radio\" style=\"position:relative; left: 0px; opacity: 100\" model=\"data.newEffect.type\" value=\"global\" \/> {{ \"Apply evertyime\" | trans }}\n                <input type=\"radio\"  style=\"position:relative; left: 0px; opacity: 100\" model=\"data.newEffect.type\" value=\"oneTime\" \/> {{ \"Apply when used\" | trans }}\n            <\/div>\n            <div class=\"col-md-3\">\n                <button ng-click=\"post()\" class=\"waves-effect waves-light btn\"><i class=\"material-icons\">send<\/i><\/button>\n            <\/div>\n        <\/li>\n        <li>\n            <div ng-if=\"data.effectsElementResource.effects.length\">\n                <ul class=\"collection\">\n                    <li class=\"row collection-item\" ng-repeat=\"effect in data.effectsElementResource.effects\">\n                        <span class=\"col-md-4\">{{ effect.property_name }}<\/span>\n                        <span class=\"col-md-4\"><input type=\"text\" ng-model=\"effect.quantity\" \/><\/span>\n                        <span class=\"col-md-4\">\n                            <a class=\"btn-floating btn-tiny waves-effect waves-light red\" ng-click=\"data.removeEffectResource = effect;post();\"><i class=\"tiny material-icons\">delete<\/i><\/a>\n                        <\/span>\n                    <\/li>\n                <\/ul>\n                <button class=\"btn\" ng-click=\"post()\">Save<\/button>\n            <\/div>\n        <\/li>\n    <\/ul>\n<\/div>\n<\/div>\n                <div class=\"clearfix\"><!-- Edit the stats of the Resource -->\n<div ng-if=\"data.statsElementResource && elementTab == 'stats'+data.statsElementResource.id\">\n\n    <ul class=\"collection\">\n        <li class=\"collection-item row\">\n            <div class=\"col-md-3\">\n                <label>{{ \"Create a new stat\" | trans }}<\/label>\n            <\/div>\n            <div class=\"col-md-3\">\n                <input type=\"text\" ng-model=\"data.newStat.name\" placeholder=\"{{ 'Name of the stat' | trans }}\" \/>\n            <\/div>\n            <div class=\"col-md-3\">\n                <input type=\"text\" ng-model=\"data.newStat.quantity\" placeholder=\"{{ 'Default value for this stat' | trans }}\" \/>\n            <\/div>\n            <div class=\"col-md-3\">\n                <button ng-click=\"post()\" class=\"waves-effect waves-light btn\"><i class=\"material-icons\">send<\/i><\/button>\n            <\/div>\n        <\/li>\n        <li class=\"collection-item row\" ng-repeat=\"stat in data.resourcesStats\">\n            <div ng-repeat=\"(propertyName, propertyValue) in data.statsElementResource.properties\" ng-if=\"propertyName == stat.name\">\n                <div class=\"col-md-6\">\n                    <label>{{ propertyName }}<\/label>\n                <\/div\/>\n                <div class=\"col-md-6\">\n                    <input type=\"text\" ng-model=\"data.statsElementResource.properties[propertyName]\" ng-change=\"silentPost()\" \/>\n                <\/div>\n            <\/div>\n        <\/li>\n    <\/ul>\n<\/div>\n<\/div>\n                <div class=\"clearfix\"><!-- Edit the costs of the Resource -->\n<div ng-if=\"data.costsElementResource && elementTab == 'costs'+data.costsElementResource.id\">\n    {{ 'Costs' | trans }}\n    <ul class=\"collection\">\n        <li ng-repeat=\"cost in data.costsElementResource.costs\" class=\"collection-item row\">\n            <div class=\"col-md-6\">\n                <label>{{ cost.cost.name }}<\/label\/>\n            <\/div>\n            <div class=\"col-md-6\">\n                <input type=\"text\" ng-model=\"cost.quantity\" ng-change=\"silentPost()\" \/>\n            <\/div>\n        <\/li>\n    <\/ul>\n<\/div>\n<\/div>\n                <div class=\"clearfix\"><!-- Edit the requirements of the Resource -->\n<div ng-if=\"data.requirementsElementResource && elementTab == 'requirements'+data.requirementsElementResource.id\">\n    <h4>{{ 'Requirements' | trans }}<\/h4>\n    <ul class=\"collection\">\n        <li class=\"collection-item row\" ng-repeat=\"item in data.requirableElements\" ng-if=\"item.id != data.requirementsElementResource.id\">\n            <div class=\"col-md-2\" ng-if=\"item.properties.picture\">\n                <img src=\"{{ item.properties.picture }}\" alt=\"{{ item.name }}\" width=\"64\" \/>\n            <\/div>\n            <div class=\"col-md-5\">\n                <label>{{ item.name }} <i>({{ item.properties.type | trans }})<\/i><\/label\/>\n            <\/div>\n            <div class=\"col-md-5\">\n                <input ng-repeat=\"requirement in data.requirementsElementResource.requirements\" ng-if=\"requirement.required_element.id == item.id\" alt=\"{{ 'ratio' | trans}}\" type=\"text\" ng-model=\"requirement.ratio\" ng-change=\"silentPost()\" \/>\n            <\/div>\n        <\/li>\n    <\/ul>\n<\/div>\n<\/div>\n            <\/li>\n        <\/ul>\n    {% endblock %}\n<\/div>\n","game_controller":"<?php\n\n$arrayReturn = [];\n\n\/*\n* Get the resources owned by the player\n*\/\n\n$resources = $game->getElementsByProperties([\n    'type' => 'Resource',\n]);\n\n$playerElements = [];\n\nif ($player) {\n    foreach ($resources as $element) {\n        $playerElement = $player->getElement($element->getId());\n        if (!$playerElement) {\n            $playerElement = $player->createElement($element->getId());\n        }\n        if ($player->canHave($element->getId())) {\n            $playerElements[] = $playerElement;\n        }\n    }\n\n    $arrayReturn['playerresources'] = $playerElements;\n}\n\n$arrayReturn['resources'] = $resources;\n\nif (isset($error)) {\n    $arrayReturn['error'] = $error;\n}\n\nreturn $arrayReturn;\n","game_template":"<!-- List resources of the player -->\n<div ng-if=\"data.playerresources.length\">\n    <div class=\"chip\" ng-repeat=\"playerElement in data.playerresources\">\n        <img ng-src=\"{{ playerElement.element.properties.picture }}\" alt=\"{{ playerElement.element.name }}\">\n        <span>\n            {{ playerElement.properties.quantity }}\n        <\/span>\n    <\/div>\n<\/div>\n"},"units":{"admin_controller":"<?php\n\n$arrayReturn = [];\n$defaultProperties = [];\n\n$defaultProperties['requirable'] = 1;\n\n\/*\n* Add module units to the game menu\n*\/\n\n$game->registerMenu('units');\n\n\/*\n* Create a new Unit\n*\/\n\n$newUnit = null;\n\n$newUnit = $game->createElementIfInRequest('newUnit', array_merge($defaultProperties, [\n    'type' => 'Unit',\n]));\n\n\/*\n* Edit stats of units\n*\/\n\n\/\/ By default no stats\nif (!$game->get('unitsStats')) {\n    $game->set('unitsStats', []);\n}\n\n\/\/ Updating stats\nif ($request->get('unitsStats')) {\n    $game->set('unitsStats', $request->get('unitsStats'));\n}\n\n\/\/ Creating a new stat\nif ($request->get('newStat')) {\n    $gameStats = $game->get('unitsStats');\n    $gameStats[] = $request->get('newStat');\n    $game->set('unitsStats', $gameStats);\n}\n\n\/\/ Delete a stat\nif ($request->get('removeUnitStat')) {\n    $gameStats = $game->get('unitsStats');\n    $newStats = [];\n    foreach ($gameStats as $stat) {\n        if ($stat->name != $request->get('removeUnitStat')['name']) {\n            $newStats[] = $stat;\n        }\n    }\n\n    $game->set('unitsStats', $newStats);\n}\n\n\/\/ Apply default stats to all elements\n$gameStats = $arrayReturn['unitsStats'] = $game->get('unitsStats');\n\n$elements = $game->getElementsByProperties(['type' => 'Unit']);\nforeach ($gameStats as $stat) {\n    foreach ($elements as $element) {\n        if (!$element->get($stat->name)) {\n            $element->set($stat->name, (int) $stat->quantity);\n        }\n        if ($request->get('removeUnitStat')) {\n            $element->removeProperty($request->get('removeUnitStat')['name']);\n        }\n    }\n}\n\n\/*\n* Edit costs of an Unit\n*\/\n\n\/\/ Update costs of a Unit\nif ($request->get('costsElementUnit')) {\n    $currentUnit = (array) $request->get('costsElementUnit');\n    $elementUnit = $game->getElement($currentUnit['id']);\n    $createdCosts = [];\n    foreach ($currentUnit['costs'] as $costInfos) {\n        $costInfos = (array) $costInfos;\n        $costInfos['cost'] = (array) $costInfos['cost'];\n        $createdCosts[] = $elementUnit->createCost($costInfos['cost']['id'], $costInfos['quantity']);\n    }\n    $arrayReturn['costsElementUnit'] = $request->get('costsElementUnit');\n}\n\n$elements = $game->getElementsByProperties(['type' => 'Unit']);\n$moneys = $game->getElementsByProperties(['type' => 'Resource']);\n\n\/\/ Apply default costs to units\nforeach ($elements as $element) {\n    $costs = $element->getCosts();\n    foreach ($moneys as $money) {\n        if (!$element->getCost($money)) {\n            $element->createCost($money, 0);\n        }\n    }\n}\n\n\/*\n* Edit requirements of an Unit\n*\/\n\n\/\/ List all requirable elements of the game\n$arrayReturn['requirableElements'] = $game->getElementsByProperties(['requirable' => 1]);\n$arrayReturn['haveRequirableElements'] = (bool) count($arrayReturn['requirableElements']);\n\n$createdRequirements = [];\n\n$units = $game->getElementsByProperties([\n    'type' => 'Unit',\n]);\n$settedElements = [];\n\n\/\/ Set default requirement (0)\nforeach ($units as $element) {\n    foreach ($element->getRequirements() as $requirement) {\n        $settedElements[] = $requirement->getRequiredElement()->getId();\n    }\n\n    foreach ($arrayReturn['requirableElements'] as $requirableElement) {\n        if (!in_array($requirableElement->getId(), $settedElements)) {\n            $createdRequirements[] = $element->createRequirement($requirableElement->getId(), 0);\n        }\n    }\n}\n\n\/\/ Update requirements of a Unit\nif ($request->get('requirementsElementUnit')) {\n    $currentUnit = (array) $request->get('requirementsElementUnit');\n    $elementUnit = $game->getElement($currentUnit['id']);\n    foreach ($currentUnit['requirements'] as $requirementInfo) {\n        $requirementInfo = (array) $requirementInfo;\n        if (!isset($requirementInfo['required_element'])) {\n            continue;\n        }\n        $requirementInfo['required_element'] = (array) $requirementInfo['required_element'];\n        $createdRequirements[] = $elementUnit->createRequirement($requirementInfo['required_element']['id'], $requirementInfo['ratio']);\n    }\n    $arrayReturn['requirementsElementUnit'] = $createdRequirements;\n}\n\n\/\/ Delete a requirement of an Unit\nif ($request->get('removeUnitRequirement')) {\n    $currentUnit = (array) $request->get('removeUnitRequirement');\n    $elementUnit = $game->getElement($currentUnit['id']);\n    $elementUnit->removeRequirement($currentUnit);\n}\n\n\/*\n* Edit an existant Unit\n*\/\n\n$game->updateElementsIfInRequest('units');\n\n\/*\n* Delete a Unit\n*\/\n\n$game->deleteElementIfInRequest('removeUnit');\n\n\/*\n* Retrieve all units\n*\/\n\n$arrayReturn['units'] = $game->getElementsByProperties([\n    'type' => 'Unit',\n]);\n\nreturn $arrayReturn;\n","admin_template":"<!-- Tabs -->\n<div ng-init=\"tabs = {}; currentModuleTab=false\"><\/div>\n\n<div class=\"row card\">\n    <div class=\"col s12\">\n      <ul class=\"tabs\">\n        <li class=\"tab col s3\" ng-repeat=\"(key, tabName) in tabs\">\n            <a ng-click=\"$parent.currentModuleTab = key\" ng-class=\"{active: currentModuleTab == key}\">\n                {{ tabName | trans }}\n            <\/a>\n        <\/li>\n      <\/ul>\n    <\/div>\n<\/div>\n\n<div ng-if=\"data.error\">\n    <div class=\"card red\">\n        <div class=\"card-content white-text\">\n            <i class=\"material-icons\">error_outline<\/i> <span style=\"position: relative;top: -7px;\">{{ data.error.message  }}<\/span>\n        <\/div>\n    <\/div>\n<\/div>\n\n<div ng-init=\"tabs ? tabs.create = 'New Unit' : null\"><\/div>\n\n<!-- Create a Unit -->\n<div ng-show=\"!tabs || currentModuleTab == 'create' || (!data.units.length && !currentModuleTab)\">\n    {% block %}\n        {% title %}{{ \"Create a new Unit\" | trans }}{% endtitle %}\n        <form>\n            <input type=\"text\" ng-model=\"data.newUnit.name\" placeholder=\"{{ 'Unit name' | trans }}\" \/>\n            <input type=\"text\" ng-model=\"data.newUnit.description\" placeholder=\"{{ 'Unit description' | trans }}\" \/>\n\n            <input type=\"text\" ng-model=\"data.newUnit.quantity\" placeholder=\"{{ 'Unit default quantity' | trans }}\" \/>\n\n\n            <input type=\"text\" ng-model=\"data.newUnit.picture\" placeholder=\"{{ 'Picture (prefixed with http:\/\/)' | trans }}\" \/>\n            {% button %}{{ \"Create this new Unit\" | trans }}{% endbutton %}\n        <\/form>\n    {% endblock %}\n<\/div>\n\n<div ng-init=\"tabs ? tabs.edit = 'All units' : null\"><\/div>\n\n<!-- Edit a Unit -->\n<div ng-show=\"(!tabs || currentModuleTab == 'edit' || (data.units.length && !currentModuleTab)) && data.units && data.units.length\">\n    {% block %}\n        {% title %}{{ \"units of your game\" | trans | ucfirst }}{% endtitle %}\n        <ul class=\"collection\">\n            <li ng-repeat=\"element in data.units\" class=\"collection-item row\">\n                <div class=\"col-md-3\">\n                    <label>{{ \"Name\" | trans }}<\/label>\n                    <input type=\"text\" ng-model=\"element.name\" ng-change=\"silentPost()\" \/>\n                <\/div>\n                <div class=\"col-md-3\" ng-repeat=\"(propertyName, propertyValue) in element.properties\" ng-if=\"propertyName == 'picture' || propertyName == 'quantity'\">\n                    <label>{{ propertyName | trans }}<\/label>\n                    <input type=\"text\" ng-model=\"element.properties[propertyName]\" ng-change=\"silentPost()\"\/>\n                <\/div>\n                <div class=\"col-md-3\">\n                    <span class=\"pull-right\" style=\"margin-right: 10px;margin-top: 25px;\"><!-- Button for edit the stats of the Unit -->\n<a class=\"btn-floating btn-tiny waves-effect waves-light blue\" ng-click=\"elementTab = 'stats'+element.id; data.statsElementUnit = element\"><i class=\"fa fa-bar-chart\"><\/i><\/a>\n<\/span>\n                    <span class=\"pull-right\" style=\"margin-right: 10px;margin-top: 25px;\"><!-- Button for edit the costs of the Unit -->\n<a class=\"btn-floating btn-tiny waves-effect waves-light green\" ng-click=\"elementTab = 'costs'+element.id; data.costsElementUnit = element\"><i class=\"fa fa-money\"><\/i><\/a>\n<\/span>\n                    <span class=\"pull-right\" style=\"margin-right: 10px;margin-top: 25px;\"><\/span>\n                    <span class=\"pull-right\" style=\"margin-right: 10px;margin-top: 25px;\"><!-- Button for edit the requirements of the Unit -->\n<a\n    class=\"btn-floating btn-tiny waves-effect waves-light green\"\n    ng-click=\"elementTab = 'requirements'+element.id; data.requirementsElementUnit = element\"\n>\n        <i class=\"fa fa-check-circle-o\"><\/i>\n<\/a>\n<\/span>\n                    <span class=\"pull-right\" style=\"margin-right: 10px;margin-top: 25px;\"><!-- Delete the Unit -->\n<a class=\"btn-floating btn-tiny waves-effect waves-light red\" ng-click=\"data.removeUnit = element.name;post();\"><i class=\"tiny material-icons\">delete<\/i><\/a>\n<\/span>\n                <\/div>\n                <div class=\"clearfix\"><\/div>\n                <div class=\"clearfix\"><!-- Edit the stats of the Unit -->\n<div ng-if=\"data.statsElementUnit && elementTab == 'stats'+data.statsElementUnit.id\">\n\n    <ul class=\"collection\">\n        <li class=\"collection-item row\">\n            <div class=\"col-md-3\">\n                <label>{{ \"Create a new stat\" | trans }}<\/label>\n            <\/div>\n            <div class=\"col-md-3\">\n                <input type=\"text\" ng-model=\"data.newStat.name\" placeholder=\"{{ 'Name of the stat' | trans }}\" \/>\n            <\/div>\n            <div class=\"col-md-3\">\n                <input type=\"text\" ng-model=\"data.newStat.quantity\" placeholder=\"{{ 'Default value for this stat' | trans }}\" \/>\n            <\/div>\n            <div class=\"col-md-3\">\n                <button ng-click=\"post()\" class=\"waves-effect waves-light btn\"><i class=\"material-icons\">send<\/i><\/button>\n            <\/div>\n        <\/li>\n        <li class=\"collection-item row\" ng-repeat=\"stat in data.unitsStats\">\n            <div ng-repeat=\"(propertyName, propertyValue) in data.statsElementUnit.properties\" ng-if=\"propertyName == stat.name\">\n                <div class=\"col-md-6\">\n                    <label>{{ propertyName }}<\/label>\n                <\/div\/>\n                <div class=\"col-md-6\">\n                    <input type=\"text\" ng-model=\"data.statsElementUnit.properties[propertyName]\" ng-change=\"silentPost()\" \/>\n                <\/div>\n            <\/div>\n        <\/li>\n    <\/ul>\n<\/div>\n<\/div>\n                <div class=\"clearfix\"><!-- Edit the costs of the Unit -->\n<div ng-if=\"data.costsElementUnit && elementTab == 'costs'+data.costsElementUnit.id\">\n    {{ 'Costs' | trans }}\n    <ul class=\"collection\">\n        <li ng-repeat=\"cost in data.costsElementUnit.costs\" class=\"collection-item row\">\n            <div class=\"col-md-6\">\n                <label>{{ cost.cost.name }}<\/label\/>\n            <\/div>\n            <div class=\"col-md-6\">\n                <input type=\"text\" ng-model=\"cost.quantity\" ng-change=\"silentPost()\" \/>\n            <\/div>\n        <\/li>\n    <\/ul>\n<\/div>\n<\/div>\n                <div class=\"clearfix\"><!-- Edit the requirements of the Unit -->\n<div ng-if=\"data.requirementsElementUnit && elementTab == 'requirements'+data.requirementsElementUnit.id\">\n    <h4>{{ 'Requirements' | trans }}<\/h4>\n    <ul class=\"collection\">\n        <li class=\"collection-item row\" ng-repeat=\"item in data.requirableElements\" ng-if=\"item.id != data.requirementsElementUnit.id\">\n            <div class=\"col-md-2\" ng-if=\"item.properties.picture\">\n                <img src=\"{{ item.properties.picture }}\" alt=\"{{ item.name }}\" width=\"64\" \/>\n            <\/div>\n            <div class=\"col-md-5\">\n                <label>{{ item.name }} <i>({{ item.properties.type | trans }})<\/i><\/label\/>\n            <\/div>\n            <div class=\"col-md-5\">\n                <input ng-repeat=\"requirement in data.requirementsElementUnit.requirements\" ng-if=\"requirement.required_element.id == item.id\" alt=\"{{ 'ratio' | trans}}\" type=\"text\" ng-model=\"requirement.ratio\" ng-change=\"silentPost()\" \/>\n            <\/div>\n        <\/li>\n    <\/ul>\n<\/div>\n<\/div>\n            <\/li>\n        <\/ul>\n    {% endblock %}\n<\/div>\n\n<div ng-init=\"tabs ? tabs.stats = 'Stats' : null\"><\/div>\n\n<div ng-if=\"!tabs || currentModuleTab == 'stats'\">\n{% block %}\n    {% title %}{{ 'New stat' | trans }}{% endtitle %}\n    <input type=\"text\" placeholder=\"{{ 'Name of the stat' | trans }}\" ng-model=\"data.newStat.name\" \/>\n    <input type=\"text\" placeholder=\"{{ 'Default value of the stat' | trans }}\" ng-model=\"data.newStat.quantity\" \/>\n    <button class=\"btn\" ng-click=\"post()\">{{ 'Create this stat' |\u00a0trans }}<\/button>\n{% endblock %}\n\n<div ng-if=\"data.unitsStats.length\">\n    {% block %}\n        {% title %}{{ \"Stats\" | trans }}{% endtitle %}\n        <ul class=\"collection\">\n            <li class=\"collection-item row\" ng-repeat=\"stat in data.unitsStats\">\n                <span class=\"col-md-4\"><input type=\"text\" ng-model=\"stat.name\" ng-change=\"silentPost()\" \/><\/span>\n                <span class=\"col-md-4\"><input type=\"text\" ng-model=\"stat.quantity\" ng-change=\"silentPost()\" \/><\/span>\n                <span class=\"col-md-4\">\n                    <span class=\"pull-right\" style=\"margin-right: 10px;margin-top: 10px;\">\n                        <a class=\"btn-floating btn-tiny waves-effect waves-light red\" ng-click=\"data.removeUnitStat = stat;post();\"><i class=\"tiny material-icons\">delete<\/i><\/a>\n                    <\/span>\n                <\/span>\n            <\/li>\n        <\/ul>\n    {% endblock %}\n    <\/div>\n<\/div>\n","game_controller":"<?php\n\n$arrayReturn = [];\n\n\/*\n* Buy a Unit\n*\/\n\nif ($request->get('playerunits')) {\n    foreach ($request->get('playerunits') as $playerElement) {\n        if (isset($playerElement['data']) && (int) $playerElement['data'] > 0) {\n            $playerElementEntity = $player->getElement($playerElement['element']['id']);\n            try {\n                $playerElementEntity->set('quantity', (int) $playerElementEntity->get('quantity') + (int) $playerElement['data']);\n            } catch (Exception $e) {\n                $error = $e->getMessage();\n            }\n        }\n    }\n}\n\n\/*\n* Get the units owned by the player\n*\/\n\n$units = $game->getElementsByProperties([\n    'type' => 'Unit',\n]);\n\n$playerElements = [];\n\nif ($player) {\n    foreach ($units as $element) {\n        $playerElement = $player->getElement($element->getId());\n        if (!$playerElement) {\n            $playerElement = $player->createElement($element->getId());\n        }\n        if ($player->canHave($element->getId())) {\n            $playerElements[] = $playerElement;\n        }\n    }\n\n    $arrayReturn['playerunits'] = $playerElements;\n}\n\n$arrayReturn['units'] = $units;\n\n\/*\n*   List stats of units\n*\/\n\n$arrayReturn['unitsStats'] = $game->get('unitsStats');\n\nif (isset($error)) {\n    $arrayReturn['error'] = $error;\n}\n\nreturn $arrayReturn;\n","game_template":"<div ng-if=\"data.error\">\n    <div class=\"card red\">\n        <div class=\"card-content white-text\">\n            <i class=\"material-icons\">error_outline<\/i> <span style=\"position: relative;top: -7px;\">{{ data.error | simpleQuote}}<\/span>\n        <\/div>\n    <\/div>\n<\/div>\n\n<!-- List units of the player -->\n<div ng-if=\"data.playerunits.length\">\n    <ul class=\"collection\">\n        <li class=\"collection-item row\" ng-repeat=\"playerElement in data.playerunits\">\n            <div class=\"col-md-4\">\n                <img ng-src=\"{{ playerElement.element.properties.picture }}\" alt=\"{{ playerElement.element.name }}\">\n            <\/div>\n            <div class=\"col-md-4\">\n                <h5>{{ playerElement.element.name }} <small>x{{ playerElement.properties.quantity }}<\/small><\/h5>\n                <!-- Stats for the playerElement -->\n<ul class=\"collection row\">\n    <li ng-repeat=\"stat in data.unitsStats\">\n        <span class=\"col-md-6\">{{ stat.name }}<\/span>\n        <span class=\"col-md-6\" ng-repeat=\"(propertyName, propertyValue) in playerElement.properties\" ng-if=\"propertyName == stat.name\">{{ propertyValue }}<\/span>\n    <li>\n<\/ul>\n\n                <!-- Costs for the playerElement -->\n<ul class=\"collection row\">\n    <li>\n        <span ng-repeat=\"cost in playerElement.element.costs\" class=\"pull-left\">\n            <img ng-src=\"{{ cost.cost.properties.picture }}\" width=\"30\" alt=\"{{ cost.cost.name | trans }}\" \/>\n            &nbsp; {{ cost.quantity }}\n        <\/span>\n    <li>\n<\/ul>\n\n            <\/div>\n            <div class=\"col-md-4\">\n                <div class=\"row\">\n                    <div class=\"col-md-6\">\n                        <input type=\"text\" placeholder=\"{{ 'How many to buy?' | trans }}\" ng-model=\"playerElement.data\" \/>\n                    <\/div>\n                    <div class=\"col-md-6\">\n                        <button class=\"btn\" ng-click=\"post()\">\n                            <i class=\"material-icons\">send<\/i>\n                        <\/button>\n                    <\/div>\n                <\/div>\n            <\/div>\n\n        <\/li>\n    <\/ul>\n<\/div>\n"},"races":{"admin_controller":"<?php\n\n$arrayReturn = [];\n$defaultProperties = [];\n\n\/*\n* Create a new Race\n*\/\n\n$newRace = null;\n\n$newRace = $game->createElementIfInRequest('newRace', array_merge($defaultProperties, [\n    'type' => 'Race',\n]));\n\n\/*\n* Edit an existant Race\n*\/\n\n$game->updateElementsIfInRequest('races');\n\n\/*\n* Create filter on Race :\n* Player has to chose a Race\n*\/\n\n$game->registerFilter('Race');\n\n\/*\n* Delete a Race\n*\/\n\n$game->deleteElementIfInRequest('removeRace');\n\n\/*\n* Retrieve all races\n*\/\n\n$arrayReturn['races'] = $game->getElementsByProperties([\n    'type' => 'Race',\n]);\n\nreturn $arrayReturn;\n","admin_template":"<!-- Tabs -->\n<div ng-init=\"tabs = {}; currentModuleTab=false\"><\/div>\n\n<div class=\"row card\">\n    <div class=\"col s12\">\n      <ul class=\"tabs\">\n        <li class=\"tab col s3\" ng-repeat=\"(key, tabName) in tabs\">\n            <a ng-click=\"$parent.currentModuleTab = key\" ng-class=\"{active: currentModuleTab == key}\">\n                {{ tabName | trans }}\n            <\/a>\n        <\/li>\n      <\/ul>\n    <\/div>\n<\/div>\n\n<div ng-if=\"data.error\">\n    <div class=\"card red\">\n        <div class=\"card-content white-text\">\n            <i class=\"material-icons\">error_outline<\/i> <span style=\"position: relative;top: -7px;\">{{ data.error.message  }}<\/span>\n        <\/div>\n    <\/div>\n<\/div>\n\n<div ng-init=\"tabs ? tabs.create = 'New Race' : null\"><\/div>\n\n<!-- Create a Race -->\n<div ng-show=\"!tabs || currentModuleTab == 'create' || (!data.races.length && !currentModuleTab)\">\n    {% block %}\n        {% title %}{{ \"Create a new Race\" | trans }}{% endtitle %}\n        <form>\n            <input type=\"text\" ng-model=\"data.newRace.name\" placeholder=\"{{ 'Race name' | trans }}\" \/>\n            <input type=\"text\" ng-model=\"data.newRace.description\" placeholder=\"{{ 'Race description' | trans }}\" \/>\n\n            \n\n            <input type=\"text\" ng-model=\"data.newRace.picture\" placeholder=\"{{ 'Picture (prefixed with http:\/\/)' | trans }}\" \/>\n            {% button %}{{ \"Create this new Race\" | trans }}{% endbutton %}\n        <\/form>\n    {% endblock %}\n<\/div>\n\n<div ng-init=\"tabs ? tabs.edit = 'All races' : null\"><\/div>\n\n<!-- Edit a Race -->\n<div ng-show=\"(!tabs || currentModuleTab == 'edit' || (data.races.length && !currentModuleTab)) && data.races && data.races.length\">\n    {% block %}\n        {% title %}{{ \"races of your game\" | trans | ucfirst }}{% endtitle %}\n        <ul class=\"collection\">\n            <li ng-repeat=\"element in data.races\" class=\"collection-item row\">\n                <div class=\"col-md-3\">\n                    <label>{{ \"Name\" | trans }}<\/label>\n                    <input type=\"text\" ng-model=\"element.name\" ng-change=\"silentPost()\" \/>\n                <\/div>\n                <div class=\"col-md-3\" ng-repeat=\"(propertyName, propertyValue) in element.properties\" ng-if=\"propertyName == 'picture' || propertyName == 'quantity'\">\n                    <label>{{ propertyName | trans }}<\/label>\n                    <input type=\"text\" ng-model=\"element.properties[propertyName]\" ng-change=\"silentPost()\"\/>\n                <\/div>\n                <div class=\"col-md-3\">\n                    <span class=\"pull-right\" style=\"margin-right: 10px;margin-top: 25px;\"><\/span>\n                    <span class=\"pull-right\" style=\"margin-right: 10px;margin-top: 25px;\"><\/span>\n                    <span class=\"pull-right\" style=\"margin-right: 10px;margin-top: 25px;\"><\/span>\n                    <span class=\"pull-right\" style=\"margin-right: 10px;margin-top: 25px;\"><!-- Button for edit the requirements of the Race -->\n<a\n    class=\"btn-floating btn-tiny waves-effect waves-light green\"\n    ng-click=\"elementTab = 'requirements'+element.id; data.requirementsElementRace = element\"\n>\n        <i class=\"fa fa-check-circle-o\"><\/i>\n<\/a>\n<\/span>\n                    <span class=\"pull-right\" style=\"margin-right: 10px;margin-top: 25px;\"><!-- Delete the Race -->\n<a class=\"btn-floating btn-tiny waves-effect waves-light red\" ng-click=\"data.removeRace = element.name;post();\"><i class=\"tiny material-icons\">delete<\/i><\/a>\n<\/span>\n                <\/div>\n                <div class=\"clearfix\"><!-- Edit the effects of the Race -->\n<div ng-if=\"data.effectsElementRace && elementTab == 'effects'+data.effectsElementRace.id\">\n    <h4>{{ 'Effects' | trans }}<\/h4>\n    <ul class=\"collection\">\n        <li class=\"collection-item row\">\n            <div class=\"col-md-3\">\n                <label>{{ \"Create a new effect\" | trans }}<\/label>\n            <\/div>\n            <div class=\"col-md-3\">\n                <input type=\"text\" ng-model=\"data.newEffect.quantity\" ng-model=\"Effect\" placeholder=\"{{ 'Effect quantity' | trans }}\" \/>\n            <\/div>\n            <div class=\"col-md-3\">\n                <select ng-model=\"data.newEffect.propertyName\" style=\"display: block\">\n                    <option disabled selected>( {{ \"Select a property\" | trans }} )<\/option>\n                    <option ng-repeat=\"property in data.properties\" value=\"{{ property.name }}\" ng-if=\"property.name != 'picture' && property.name != 'type' && property.name != 'quantity'\">\n                        {{ property.name }}\n                    <\/option>\n                <\/select>\n                <input type=\"radio\" style=\"position:relative; left: 0px; opacity: 100\" model=\"data.newEffect.type\" value=\"global\" \/> {{ \"Apply evertyime\" | trans }}\n                <input type=\"radio\"  style=\"position:relative; left: 0px; opacity: 100\" model=\"data.newEffect.type\" value=\"oneTime\" \/> {{ \"Apply when used\" | trans }}\n            <\/div>\n            <div class=\"col-md-3\">\n                <button ng-click=\"post()\" class=\"waves-effect waves-light btn\"><i class=\"material-icons\">send<\/i><\/button>\n            <\/div>\n        <\/li>\n        <li>\n            <div ng-if=\"data.effectsElementRace.effects.length\">\n                <ul class=\"collection\">\n                    <li class=\"row collection-item\" ng-repeat=\"effect in data.effectsElementRace.effects\">\n                        <span class=\"col-md-4\">{{ effect.property_name }}<\/span>\n                        <span class=\"col-md-4\"><input type=\"text\" ng-model=\"effect.quantity\" \/><\/span>\n                        <span class=\"col-md-4\">\n                            <a class=\"btn-floating btn-tiny waves-effect waves-light red\" ng-click=\"data.removeEffectRace = effect;post();\"><i class=\"tiny material-icons\">delete<\/i><\/a>\n                        <\/span>\n                    <\/li>\n                <\/ul>\n                <button class=\"btn\" ng-click=\"post()\">Save<\/button>\n            <\/div>\n        <\/li>\n    <\/ul>\n<\/div>\n<\/div>\n                <div class=\"clearfix\"><!-- Edit the stats of the Race -->\n<div ng-if=\"data.statsElementRace && elementTab == 'stats'+data.statsElementRace.id\">\n\n    <ul class=\"collection\">\n        <li class=\"collection-item row\">\n            <div class=\"col-md-3\">\n                <label>{{ \"Create a new stat\" | trans }}<\/label>\n            <\/div>\n            <div class=\"col-md-3\">\n                <input type=\"text\" ng-model=\"data.newStat.name\" placeholder=\"{{ 'Name of the stat' | trans }}\" \/>\n            <\/div>\n            <div class=\"col-md-3\">\n                <input type=\"text\" ng-model=\"data.newStat.quantity\" placeholder=\"{{ 'Default value for this stat' | trans }}\" \/>\n            <\/div>\n            <div class=\"col-md-3\">\n                <button ng-click=\"post()\" class=\"waves-effect waves-light btn\"><i class=\"material-icons\">send<\/i><\/button>\n            <\/div>\n        <\/li>\n        <li class=\"collection-item row\" ng-repeat=\"stat in data.racesStats\">\n            <div ng-repeat=\"(propertyName, propertyValue) in data.statsElementRace.properties\" ng-if=\"propertyName == stat.name\">\n                <div class=\"col-md-6\">\n                    <label>{{ propertyName }}<\/label>\n                <\/div\/>\n                <div class=\"col-md-6\">\n                    <input type=\"text\" ng-model=\"data.statsElementRace.properties[propertyName]\" ng-change=\"silentPost()\" \/>\n                <\/div>\n            <\/div>\n        <\/li>\n    <\/ul>\n<\/div>\n<\/div>\n                <div class=\"clearfix\"><!-- Edit the costs of the Race -->\n<div ng-if=\"data.costsElementRace && elementTab == 'costs'+data.costsElementRace.id\">\n    {{ 'Costs' | trans }}\n    <ul class=\"collection\">\n        <li ng-repeat=\"cost in data.costsElementRace.costs\" class=\"collection-item row\">\n            <div class=\"col-md-6\">\n                <label>{{ cost.cost.name }}<\/label\/>\n            <\/div>\n            <div class=\"col-md-6\">\n                <input type=\"text\" ng-model=\"cost.quantity\" ng-change=\"silentPost()\" \/>\n            <\/div>\n        <\/li>\n    <\/ul>\n<\/div>\n<\/div>\n                <div class=\"clearfix\"><!-- Edit the requirements of the Race -->\n<div ng-if=\"data.requirementsElementRace && elementTab == 'requirements'+data.requirementsElementRace.id\">\n    <h4>{{ 'Requirements' | trans }}<\/h4>\n    <ul class=\"collection\">\n        <li class=\"collection-item row\" ng-repeat=\"item in data.requirableElements\" ng-if=\"item.id != data.requirementsElementRace.id\">\n            <div class=\"col-md-2\" ng-if=\"item.properties.picture\">\n                <img src=\"{{ item.properties.picture }}\" alt=\"{{ item.name }}\" width=\"64\" \/>\n            <\/div>\n            <div class=\"col-md-5\">\n                <label>{{ item.name }} <i>({{ item.properties.type | trans }})<\/i><\/label\/>\n            <\/div>\n            <div class=\"col-md-5\">\n                <input ng-repeat=\"requirement in data.requirementsElementRace.requirements\" ng-if=\"requirement.required_element.id == item.id\" alt=\"{{ 'ratio' | trans}}\" type=\"text\" ng-model=\"requirement.ratio\" ng-change=\"silentPost()\" \/>\n            <\/div>\n        <\/li>\n    <\/ul>\n<\/div>\n<\/div>\n            <\/li>\n        <\/ul>\n    {% endblock %}\n<\/div>\n","game_controller":"<?php\n\n\/*\n* Filter on Race :\n* If Player chose a Race\n*\/\n\nif ($request->get('chosenRace')) {\n    $player->set('Race', $request->get('chosenRace')['id']);\n}\n\n$playerRace = $player->get('Race');\nif ($playerRace) {\n    $playerRace = $game->getElement($playerRace);\n}\n\n$arrayReturn['playerRace'] = $playerRace;\n\n$arrayReturn = [];\n\n\/*\n* Get the races owned by the player\n*\/\n\n$races = $game->getElementsByProperties([\n    'type' => 'Race',\n]);\n\n$playerElements = [];\n\nif ($player) {\n    foreach ($races as $element) {\n        $playerElement = $player->getElement($element->getId());\n        if (!$playerElement) {\n            $playerElement = $player->createElement($element->getId());\n        }\n        if ($player->canHave($element->getId())) {\n            $playerElements[] = $playerElement;\n        }\n    }\n\n    $arrayReturn['playerraces'] = $playerElements;\n}\n\n$arrayReturn['races'] = $races;\n\nif (isset($error)) {\n    $arrayReturn['error'] = $error;\n}\n\nreturn $arrayReturn;\n","game_template":"<div ng-if=\"!data.playerRace\">\n    {% block %}\n        {% title %}\n            {{ data.introduction }}\n        {% endtitle %}\n    {% endblock %}\n    <div ng-repeat=\"race in data.races\" class=\"card horizontal\">\n        <div class=\"card-image\">\n            <img ng-repeat=\"property in race.properties\" ng-if=\"property.name == 'picture'\" ng-src=\"{{ property.value }}\" \/>\n        <\/div>\n        <div class=\"card-content\">\n            <div class=\"card-title\">\n                {{ race.name }}\n                <p>{{ race.description }}<\/p>\n                <button class=\"btn\" ng-click=\"data.chosenRace = race; post()\">I want to be a {{ race.name }}!<\/button>\n            <\/div>\n        <\/div>\n    <\/div>\n<\/div>\n<div ng-if=\"data.playerRace\">\n    You are a {{ data.playerRace.name }}\n<\/div>\n"},"ranking":{"admin_controller":"<?php\n\n$arrayReturn = [];\n\n$elements = $game->getElements();\n\nif ($request->get('rankingElement')) {\n    $element = $game->getElement((array) $request->get('rankingElement')['id']);\n    $game->setRankingElement($element);\n}\n\nif (0 === count($elements)) {\n    $arrayReturn['error']['message'] = 'You do not have any element. Please create at least one using others modules.';\n}\n$arrayReturn[] = $elements;\n\nreturn $arrayReturn;\n","admin_template":"<!-- Tabs -->\n<div ng-if=\"data.error\">\n    <div class=\"card red\">\n        <div class=\"card-content white-text\">\n            <i class=\"material-icons\">error_outline<\/i> <span style=\"position: relative;top: -7px;\">{{ data.error.message | trans  }}<\/span>\n        <\/div>\n    <\/div>\n<\/div>\n\n<!-- List elements-->\n<div ng-show=\"!tabs || currentModuleTab == 'create' || (!data.buildings.length && !currentModuleTab)\">\n    {% block %}\n        {% title %}{{ \"Rank players by\" | trans }}...{% endtitle %}\n        <ul ng-repeat=\"element in elements\" class=\"collection row\">\n            <li class=\"collection-item\">\n                <div class=\"col-md-6\">\n                    {{ element.name }} <i>({{ element.type | trans }})<\/i>\n                <\/div>\n                <div class=\"col-md-6\">\n                    <input type=\"checkbox\" ng-model=\"{{ element.ranking }}\" ng-change=\"silentPost()\" \/>\n                <\/div>\n            <\/li>\n        <\/ul>\n    {% endblock %}\n<\/div>\n","game_controller":"<?php\n\n$players = [];\n$game->registerMenu('ranking');\nif ($request->get('page')) {\n    $page = (int) $request->get('page');\n} else {\n    $page = 1;\n}\n\n$players = $game->getPlayersByRank($page);\n\n$arrayReturn = [\n    'players' => $players,\n    'page' => $page,\n    'startRank' => ($page - 1) * 25 + 1,\n];\n\nreturn $arrayReturn;\n","game_template":"<!-- List players by rank -->\n<table>\n    <tr ng-repeat=\"player in data.players\">\n        <td>{{ data.startRank + $index }}<\/td>\n        <td>{{ player.pseudo }}<\/td>\n    <\/tr>\n<\/table>\n"},"objects.old":{"admin_controller":"<?php\n\n$game->registerMenu('Objets');\n\n$newObject = $game->createElementIfInRequest('newObject', [\n    'type' => 'Object',\n    'usable' => true,\n]);\n\n$game->deleteElementIfInRequest('removeObject');\n\nif ($request->get('currentObject')) {\n    $object = $game->getElement($request->get('currentObject')['id']);\n    foreach ($request->get('currentObject')['properties'] as $property) {\n        $object->set($property['name'], $property['value']);\n    }\n    if ($request->get('newEffect')) {\n        $effect = $object->createEffect($request->get('newEffect')['propertyName'], $request->get('newEffect')['quantity']);\n    }\n}\n\n$objects = $game->getElementsByProperties([\n    'type' => 'Object',\n]);\n\nreturn [\n    'objects' => $objects,\n    'properties' => $game->getElementsProperties(),\n];\n","admin_template":"<div class=\"row card\">\n    <div class=\"col s12\">\n      <ul class=\"tabs\">\n        <li class=\"tab col s3\"><a ng-click=\"currentTab = 'all'; currentObject = null\">All Objects<\/a><\/li>\n        <li class=\"tab col s3\"><a class=\"active\" ng-click=\"currentTab = 'new'\">New Object<\/a><\/li>\n      <\/ul>\n    <\/div>\n<\/div>\n\n<div ng-if=\"currentTab == 'new' || (!data.objects.length && !currentTab)\">\n    {% block %}\n        {% title %}New object{% endtitle %}\n        <input type=\"text\" placeholder=\"Name of the object\" ng-model=\"data.newObject.name\" \/>\n        <input type=\"text\" placeholder=\"Picture of the object\" ng-model=\"data.newObject.picture\" \/>\n        <button class=\"btn\" ng-click=\"post()\">Create this object<\/button>\n    {% endblock %}\n<\/div>\n\n<div ng-if=\"currentTab == 'all' || (!data.currentObject && data.objects.length && !currentTab)\">\n    {% block %}\n    <ul class=\"collection\">\n        <li class=\"collection-item clear row\" ng-repeat=\"object in data.objects\">\n            <span class=\"col-md-6\">{{ object.name }}<\/span>\n            <span class=\"col-md-6\">\n                <button class=\"btn\" ng-click=\"data.currentObject = object\">Edit<\/button>\n            <\/span>\n        <\/li>\n    <\/ul>\n    <div class=\"clear\"><\/div>\n    {% endblock %}\n<\/div>\n\n<div ng-if=\"data.currentObject && (currentTab == 'all' || !currentTab)\">\n    {% block %}\n        {% title %}Properties of {{ data.currentObject.name }}{% endtitle %}\n        <ul class=\"collection\">\n            <li class=\"row collection-item\" ng-repeat=\"property in data.currentObject.properties\" ng-if=\"property.name != 'isObject'\">\n                <span class=\"col-md-6\">{{ property.name }}<\/span>\n                <span class=\"col-md-6\"><input type=\"text\" ng-model=\"property.value\" \/><\/span>\n            <\/li>\n        <\/ul>\n        <button class=\"btn\" ng-click=\"post()\">Save<\/button>\n    {% endblock %}\n    {% block %}\n        <div ng-if=\"data.currentObject.effects.length\">\n            {% title %}Effects of {{ data.currentObject.name }}{% endtitle %}\n            <ul class=\"collection\">\n                <li class=\"row collection-item\" ng-repeat=\"effect in data.currentObject.effects\">\n                    <span class=\"col-md-6\">{{ effect.property_name }}<\/span>\n                    <span class=\"col-md-6\"><input type=\"text\" ng-model=\"effect.quantity\" \/><\/span>\n                <\/li>\n            <\/ul>\n            <button class=\"btn\" ng-click=\"post()\">Save<\/button>\n        <\/div>\n    {% endblock %}\n    {% block %}\n        {% title %}New effect{% endtitle %}\n        <select ng-model=\"data.newEffect.propertyName\">\n            <option disabled selected>( Select a property )<\/option>\n            <option ng-repeat=\"property in data.properties\" value=\"{{ property.name }}\">\n                {{ property.name }}\n            <\/option>\n        <\/select>\n        <input type=\"text\" ng-model=\"data.newEffect.quantity\" ng-model=\"Effect\" \/>\n        <button class=\"btn\" ng-click=\"post()\">Create effect<\/button>\n    {% endblock %}\n<\/div>\n","game_controller":"<?php\n\n$game->registerMenu('Objets');\n\nif ($player) {\n    $objects = $game->getElementsByProperties([\n        'type' => 'Object',\n    ]);\n\n    foreach ($objects as $object) {\n        if (!$player->getElement($object)) {\n            $player->createElement($object->id, 0);\n        }\n    }\n\n    if ($request->get('playerObjects')) {\n        foreach ($request->get('playerObjects') as $object) {\n            if (isset($object['data']) && $object['data']) {\n                $playerElement = $player->getElement($object['element']['id']);\n                $playerElement->set('quantity', $playerElement->get('quantity') + (int) $object['data']);\n            }\n        }\n    }\n\n    if ($request->get('currentObject')) {\n        $playerElement = $player->getElement($request->get('currentObject')['element']['id']);\n        $playerElement->set('quantity', $playerElement->get('quantity') - 1);\n    }\n\n    $playerObjects = $player->getElementsByProperties([\n        'type' => 'Object',\n    ]);\n\n    return [\n        'objects' => $objects,\n        'playerObjects' => $playerObjects,\n    ];\n}\n\nreturn [];\n","game_template":"<div class=\"card horizontal\" ng-repeat=\"object in data.playerObjects\">\n    <div class=\"card-image\">\n        <img ng-repeat=\"property in object.element.properties\" ng-if=\"property.name == 'picture'\" ng-src=\"{{ property.value }}\">\n    <\/div>\n    <div class=\"card-content\">\n        <div class=\"card-title\">\n            {{ object.element.name }}\n            <span ng-repeat=\"property in object.properties\" ng-if=\"property.name == 'quantity'\">\n                ({{ property.value }})\n            <\/span>\n        <\/div>\n        <div class=\"row\">\n            <div class=\"col-md-4\">\n                Effects: <br \/>\n                <div ng-repeat=\"effect in object.element.effects\">\n                    <span ng-if=\"effect.quantity > 0\">+<\/span> {{ effect.quantity }}\n                    {{ effect.property_name }}\n                <\/div>\n                <button class=\"btn\" ng-click=\"data.currentObject = object; post()\">Use it!<\/button>\n            <\/div>\n            <div class=\"col-md-4\">\n                <input type=\"text\"  ng-model=\"object.data\" placeholder=\"Quantity to buy\" \/>\n            <\/div>\n            <div class=\"col-md-4\">\n                <button class=\"btn\" ng-click=\"post()\">Buy!<\/button>\n            <\/div>\n        <\/div>\n    <\/div>\n<\/div>\n"},"character":{"admin_controller":"<?php\n\n$game->registerMenu('Personnage');\n$game->registerTrigger('xp', function () {\n    if ($player->get('xp') >= $player->get('level') * 1500) {\n        $player->set('xp', 0);\n        $player->set('level', $player->get('level') + 1);\n    }\n});\n\nreturn [];\n","admin_template":"{% block %}Hello Jcray! This is my module!{% endblock %}\n","game_controller":"<?php\n\n$game->registerMenu('Personnage');\n\nif (!$player->get('level')) {\n    $player->set('level', 1);\n}\n\nif (!$player->get('xp')) {\n    $player->set('xp', 0);\n}\n\n$player->set('xp', 6000);\n\nreturn [];\n","game_template":"{% block %}\n    {% title %}{{ player.pseudo }}{% endtitle %}\n    <ul class=\"collection\">\n        <li class=\"collection-item\">\n            Level:\n            <span ng-repeat=\"property in player.properties\" ng-if=\"property.name=='level'\">\n                {{ property.value }}\n            <\/span>\n        <\/li>\n\n        <li class=\"collection-item\">\n            Xp:\n            <span ng-repeat=\"property in player.properties\" ng-if=\"property.name=='xp'\">\n                {{ property.value }}\n            <\/span>\n        <\/li>\n        <li class=\"collection-item\" ng-repeat=\"playerElement in data.filters\">\n            {{ filter.property_name }}\n            <span ng-repeat=\"property in player.properties\" ng-if=\"property.name == filter.property_name\">\n                {{ property.value }}\n            <\/span>\n        <\/li>\n    <\/ul>\n{% endblock %}\n"}};